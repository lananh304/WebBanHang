if (self.CavalryLogger) { CavalryLogger.start_js(["Up0\/U"]); }

__d("VideoBroadcastStatus",[],(function(a,b,c,d,e,f){e.exports={PREVIEW:"PREVIEW",LIVE:"LIVE",LIVE_STOPPED:"LIVE_STOPPED",VOD_READY:"VOD_READY",SEAL_STARTED:"SEAL_STARTED",SCHEDULED_PREVIEW:"SCHEDULED_PREVIEW",SCHEDULED_LIVE:"SCHEDULED_LIVE",SCHEDULED_EXPIRED:"SCHEDULED_EXPIRED",SCHEDULED_CANCELED:"SCHEDULED_CANCELED",PRE_LIVE:"PRE_LIVE",SEAL_FAILED:"SEAL_FAILED"}}),null);
__d("VideoViewabilityKeyEvents",[],(function(a,b,c,d,e,f){e.exports={Events:["entered_fs","exited_fs","finished_playing","paused","player_format_changed","started_playing","unpaused"]}}),null);
__d("MCustomDialog",["cx","DOM","ge"],(function(a,b,c,d,e,f,g){__p&&__p();a={show:function(a){__p&&__p();var c,d=(c=b("DOM")).create("div",{className:"_3uug"},null),e=c.create("div",{className:"_3uuh"},c.create("h2",null,a.titleString)),f=c.create("div",{className:"_3uui"},c.create("p",null,a.descriptionString)),g=c.create("p",{className:"_3uuj"},a.dismissButtonString),h=c.create("div",{className:"_3uuk"},g);c.appendContent(d,e);c.appendContent(d,f);c.appendContent(d,h);if(a.confirmButtonString&&a.confirmButtonCallback){var i=b("DOM").create("p",{className:"_3uuj"},a.confirmButtonString);b("DOM").prependContent(h,i)}var j=b("DOM").create("div",{className:"_3uul"},d);g.addEventListener("click",function(){b("DOM").remove(j),a.dismissButtonCallback&&a.dismissButtonCallback()});i&&i.addEventListener("click",function(){b("DOM").remove(j),a.confirmButtonCallback&&a.confirmButtonCallback()});e=b("ge")("root");e&&b("DOM").prependContent(e,j)}};e.exports=a}),null);
__d("dangerouslyOverrideMediaElementEndedProperty",[],(function(a,b,c,d,e,f){function a(a){a===void 0&&(a={});a.dangerouslyOverrideMediaElementEndedProperty=!0;return a}a.isEnded=function(a){return!!(a&&a.detail&&a.detail.dangerouslyOverrideMediaElementEndedProperty)};e.exports=a}),null);
__d("HTMLMediaElementReadyStates",[],(function(a,b,c,d,e,f){a={HAVE_NOTHING:0,HAVE_METADATA:1,HAVE_CURRENT_DATA:2,HAVE_FUTURE_DATA:3,HAVE_ENOUGH_DATA:4};e.exports=a}),null);
__d("getHTMLMediaElementMutedState",["HTMLMediaElementReadyStates"],(function(a,b,c,d,e,f){function a(a){if(a.readyState>=b("HTMLMediaElementReadyStates").HAVE_METADATA)return a.muted;else return a.hasAttribute("muted")||a.muted}e.exports=a}),null);
__d("HVideoPlayerMixin",["EventListener","UserAgent","VideoPlayerHTML5Experiments","VideoPlayerLoggerEvent","dangerouslyOverrideMediaElementEndedProperty","getHTMLMediaElementMutedState","getVideoBrowserTabId"],(function(a,b,c,d,e,f){__p&&__p();var g=-1,h=!!(window.performance&&window.performance.now&&window.performance.timing&&window.performance.timing.navigationStart);function i(a,b){__p&&__p();a.time_ms=Date.now();b=b.timeStamp;if(b&&h){var c=Math.floor(b).toString().length,d=Date.now().toString().length,e=window.performance.now();if(c===d+3)b=Math.floor(b/1e3),a.time_ms=b;else if(c===d)a.time_ms=b;else if(b<=e){c=window.performance.timing.navigationStart;a.time_ms=c+Math.floor(b)}}return a}a={initLogger:function(a,c,d,e,f,h){__p&&__p();var i=this;this._loggedEvents={};this._logFunction=a;this._fixOverwrittenGetVideoCurrentTime=e;this._fireSeekEvents=f;this._useEventTime=c;this._recentPausedTime=null;var j=this.getVideoElement();if(h){var k=j.pause;j.pause=function(){i._recentPausedTime=j.currentTime;return k.apply(j)}}d&&(this._overwriteVideoCurrentTimeProperty(j),this._didOverwriteVideoCurrentTimeProperty||(this.preventSeekLoggingInMixin=!0));this._lastStartTimePosition=g;this._muted=b("getHTMLMediaElementMutedState")(j);this._pausedPosition=g;this._seeking=!1;this._seekSourceTimePosition=g;this._currentTimeAtSeekStart=g;this._volume=j.volume;this._hasBlockedPausedRepresentationEnded=!1;this._logNextPlayingEvent=!0;this._lastPlayedTime=g;a=!1;j.readyState>=j.HAVE_FUTURE_DATA?this._logReadyToPlay():a=!0;if(this.skipSubscriptions())return;e=this.getSubscriptions();a&&e.addSubscriptions(b("EventListener").listen(j,"canplay",this._logReadyToPlay.bind(this)));e.addSubscriptions(b("EventListener").listen(j,"ended",this.onEnded.bind(this)),b("EventListener").listen(j,"pause",this.onPause.bind(this)),b("EventListener").listen(j,"playing",this.onPlaying.bind(this)),b("EventListener").listen(j,"seeked",this.onSeeked.bind(this)),b("EventListener").listen(j,"seeking",this.onSeeking.bind(this)),b("EventListener").listen(j,"play",this.onPlay.bind(this)),b("EventListener").listen(j,"loadedmetadata",this.onLoadedMetadata.bind(this)),b("EventListener").listen(j,"timeupdate",this.onTimeUpdate.bind(this)),b("EventListener").listen(j,"volumechange",this.onVolumeChange.bind(this)))},skipSubscriptions:function(){return!1},onCanPlay:function(a){this._logReadyToPlay(a)},onPlay:function(a){this._logNextPlayingEvent=!0,this._ignoreNextPlaying=!1,this._pendingPlayRequest=!0},logHeartbeat:function(){if(b("VideoPlayerHTML5Experiments").heartbeatUpdateWatchTime){this._logEvent(b("VideoPlayerLoggerEvent").HEART_BEAT,this._getWatchTimeClosingLogData({}));var a=this._getVideoCurrentTime();this._lastStartTimePosition=a;this._lastPlayedTime=a}else this._logEvent(b("VideoPlayerLoggerEvent").HEART_BEAT)},_getWatchTimeClosingLogData:function(a){this._lastPlayedTime=this._getVideoCurrentTime();return this._amendEventTime(babelHelpers["extends"]({video_last_start_time_position:this._lastStartTimePosition===g?this._lastPlayedTime:this._lastStartTimePosition,video_time_position:this._lastPlayedTime},a))},_logOnce:function(a,b){if(this._loggedEvents[a])return;this._logEvent(a,b)},_logEvent:function(a,c){__p&&__p();this._loggedEvents[a]=!0;c=c?c:{};c.video_id=this.getVideoID();c.browser_tab_id=b("getVideoBrowserTabId")();c.has_blocked_paused_representation_ended=this._hasBlockedPausedRepresentationEnded;Object.prototype.hasOwnProperty.call(c,"video_time_position")||(c.video_time_position=this._getVideoCurrentTime());c.time_ms||(c.time_ms=Date.now());c.time=Math.round(c.time_ms/1e3);if(this.getAdClientToken){var d=this.getAdClientToken();d&&(c.ad_client_token=d)}this.getPlayerFormat&&(c.player_format=this.getPlayerFormat());this.getPlayerOrigin&&(c.player_origin=this.getPlayerOrigin());this.getPlayerSuborigin&&(c.player_suborigin=this.getPlayerSuborigin());this._logFunction(a,c)},_logReadyToPlay:function(){return},__setPendingPlayRequest:function(a){this._pendingPlayRequest=a},onPause:function(a){__p&&__p();this._logNextPlayingEvent=!0;var c=this.getVideoElement();if(this._pendingPlayRequest){var d={debug_reason:this.getLastPlayReason()};this._pendingPlayRequest=!1;this._logEvent(b("VideoPlayerLoggerEvent").CANCELLED_REQUESTED_PLAYING,d);return}d=!!this._getVideoPlayerShakaConfig()&&this._getVideoPlayerShakaConfig().getBool("abort_loading_decisioning_logic",!1);d=c.ended||d&&b("dangerouslyOverrideMediaElementEndedProperty").isEnded(a)?b("VideoPlayerLoggerEvent").FINISHED_PLAYING:b("VideoPlayerLoggerEvent").PAUSED;var e=this._recentPausedTime==null?this._getVideoCurrentTime():this._recentPausedTime;this._recentPausedTime=null;e&&(this._lastPlayedTime=e);e=this._lastPlayedTime;var f=this._lastStartTimePosition===g?this._lastPlayedTime:this._lastStartTimePosition;b("VideoPlayerHTML5Experiments").preventNegativeTimePositions&&(this._lastPlayedTime<0&&(e=0,this._lastStartTimePosition<0&&(f=0)));var h=a.lastPauseReason;if(d===b("VideoPlayerLoggerEvent").FINISHED_PLAYING)e=Math.max(e,c.duration);else if(this.preventPauseLoggingInMixin===!0)return;else this.preventPauseLoggingInMixin===!1&&(h=h||"unloaded");this._logEvent(d,this._amendEventTime({video_last_start_time_position:f,video_time_position:e,debug_reason:h},a));this._lastStartTimePosition=g},onEnded:function(){this._logNextPlayingEvent=!0,this._lastStartTimePosition!==g&&b("UserAgent").isBrowser("IE")&&this.onPause({})},onBlockedPausedRepresentationEnded:function(){this._hasBlockedPausedRepresentationEnded=!0},logRepresentationEnded:function(a){__p&&__p();if(a){a={representation_id:a.representationID,next_representation_id:a.nextRepresentationID,stream_switch_reason:a.streamSwitchReason};b("VideoPlayerHTML5Experiments").newStateChangeCalculation&&(a=this._getWatchTimeClosingLogData(a));this._logEvent(b("VideoPlayerLoggerEvent").REPRESENTATION_ENDED,a);if(b("VideoPlayerHTML5Experiments").newStateChangeCalculation){a=this._getVideoCurrentTime();this._lastStartTimePosition=a;this._lastPlayedTime=a}}},addWatchTimeData:function(a){this._lastStartTimePosition!=g&&this._lastPlayedTime!=g&&(a.video_last_start_time_position=this._lastStartTimePosition,a.video_time_position=this._lastPlayedTime,this._lastStartTimePosition=g);return a},getLastPlayReason:function(){return null},getVideoPlayReason:function(){return null},onPlaying:function(a){__p&&__p();if(!this._logNextPlayingEvent)return;b("VideoPlayerHTML5Experiments").superficialUnpauseEventsFix&&(this._logNextPlayingEvent=!1);if(this._ignoreNextPlaying){this._ignoreNextPlaying=!1;return}var c=this.getLastPlayReason();this._pendingPlayRequest=!1;var d=this._loggedEvents[b("VideoPlayerLoggerEvent").STARTED_PLAYING]?b("VideoPlayerLoggerEvent").UNPAUSED:b("VideoPlayerLoggerEvent").STARTED_PLAYING;c=this._amendEventTime({debug_reason:c,video_play_reason:this.getVideoPlayReason()},a);a=this._getVideoCurrentTime();if(b("VideoPlayerHTML5Experiments").useCurrentTimeAdjustment){var e=this.getVideoElement().currentTime;e=e-a;c.time_ms-=Math.round(e*1e3)}this._logEvent(d,c);this._lastStartTimePosition=a;this._lastPlayedTime=a;this._currentTimeAtLoadedMetadataCache=null},allowNextSeekInMixin:function(){this._allowNextSeek=!0},onSeeked:function(a){__p&&__p();this._seeking=!1;var c=this._seekSourceTimePosition;this._seekSourceTimePosition=g;var d=this._currentTimeAtSeekStart;this._currentTimeAtSeekStart=g;if(this.preventSeekLoggingInMixin&&!this._allowNextSeek){this._pendingPlayRequest||(this._ignoreNextPlaying=!0);return}this._allowNextSeek=!1;this._ignoreNextPlaying=!1;var e={video_seek_source_time_position:c,video_last_start_time_position:c};this._fixOvewrittenGetVideoCurrentTime&&(e.video_seek_source_time_position=d);this.preventSeekLoggingInMixin&&(this._lastStartTimePosition!==g?e.video_last_start_time_position=this._lastStartTimePosition:e.video_last_start_time_position=c);c=b("VideoPlayerLoggerEvent").SCRUBBED;this._fireSeekEvents&&(c=b("VideoPlayerLoggerEvent").SEEKED,e={seek_from_video_time_position:d});this._logEvent(c,this._amendEventTime(e,a));d=this.getVideoElement();d.paused?this._lastStartTimePosition=g:this._lastStartTimePosition=this._getVideoCurrentTime()},onSeeking:function(a){this._currentTimeAtLoadedMetadataCache=null;this._seeking||(this._seekSourceTimePosition=this._getVideoCurrentTime(),this._seeking=!0);if(this._fixOverwrittenGetVideoCurrentTime)return;this._currentTimeAtSeekStart=g},onTimeUpdate:function(a){this._currentTimeAtLoadedMetadataCache=null;a=this.getVideoElement();a.paused||(this._lastPlayedTime=this._getVideoCurrentTime())},onVolumeChange:function(a){__p&&__p();var c=this.getVideoElement(),d={},e=null;if(b("VideoPlayerHTML5Experiments").useFixedVolumeLogging){var f=c.muted,g=this._muted,h=c.volume,i=this._volume;d.current_volume=Math.round(h*100);this._volume=h;this._muted=f;f=f||h==0;g=g||i==0;if(g&&f)return;if(g!=f)f?e=b("VideoPlayerLoggerEvent").MUTED:e=b("VideoPlayerLoggerEvent").UNMUTED;else{if(i==h)return;h<i?e=b("VideoPlayerLoggerEvent").VOLUME_DECREASE:e=b("VideoPlayerLoggerEvent").VOLUME_INCREASE}}else c.muted!==this._muted&&c.volume===this._volume&&c.volume>0?e=c.muted?b("VideoPlayerLoggerEvent").MUTED:b("VideoPlayerLoggerEvent").UNMUTED:(e=c.volume>this._volume?b("VideoPlayerLoggerEvent").VOLUME_INCREASE:b("VideoPlayerLoggerEvent").VOLUME_DECREASE,d.current_volume=Math.round(c.volume*100)),this._muted=c.muted,this._volume=c.volume;this._logEvent(e,this._amendEventTime(d,a))},_amendEventTime:function(a,c){var d=this._useEventTime;b("VideoPlayerHTML5Experiments").fixEventTimeLogging&&(d=d&&c);if(d)return i(a,c);else a.time_ms=Date.now();return a},_getVideoCurrentTime:function(){var a;this._fixOverwrittenGetVideoCurrentTime?a=this.getVideoElement().currentTime:a=this._currentTimeAtSeekStart===g?this.getVideoElement().currentTime:this._currentTimeAtSeekStart;a=a.toFixed(2);b("VideoPlayerHTML5Experiments").useCurrentTimeAdjustment&&(this._currentTimeAtLoadedMetadataCache!=null&&(a=this._currentTimeAtLoadedMetadataCache.toFixed(2)));return b("VideoPlayerHTML5Experiments").fixCurrentTimeType?+a:a},_getVideoPlayerShakaConfig:function(){return this.getVideoPlayerShakaConfig&&typeof this.getVideoPlayerShakaConfig==="function"?this.getVideoPlayerShakaConfig():null},onLoadedMetadata:function(a){this._currentTimeAtLoadedMetadataCache=this.getVideoElement().currentTime},_overwriteVideoCurrentTimeProperty:function(a){__p&&__p();var b=this;this._didOverwriteVideoCurrentTimeProperty=!1;try{var c=Object.getOwnPropertyDescriptor&&Object.getOwnPropertyDescriptor(HTMLMediaElement.prototype,"currentTime");if(!c)return;if(typeof c.get!=="function"||typeof c.set!=="function")return;Object.defineProperty&&Object.defineProperty(a,"currentTime",{get:function(){return c.get.call(this)},set:function(d){b._currentTimeAtSeekStart===g&&(b._currentTimeAtSeekStart=c.get.call(a)),c.set.call(a,d)},configurable:!0,enumerable:!0});this._didOverwriteVideoCurrentTimeProperty=!0}catch(a){}}};e.exports=a}),null);
__d("HVideoPlayerLoggerMixin",["EventListener","HVideoPlayerMixin","VideoPlayerLogger","VideoPlayerLoggerEvent"],(function(a,b,c,d,e,f){__p&&__p();a={};c={initLogger:function(){__p&&__p();var a=this;b("EventListener").listen(this.getVideoElement(),"play",function(){return a._onPlayLogUnmute()});this._logger=new(b("VideoPlayerLogger"))(b("VideoPlayerLogger").Sources.HTML5);var c=function(c,d){var e=a.getSavedOffline(),f=a.getConnectivityType(),g=a.getResourceUrl(),h=a.getIsAdsPreview();d=babelHelpers["extends"]({},d,{saved_offline:e,connectivity_type:f,resource_url:g,is_ads_preview:h});c===b("VideoPlayerLoggerEvent").UNMUTED&&(a._unmutedWasLogged=!0);d=Object.assign(d,a.getAdditionalLogData(c));a._logger.logEvent(c,d)};b("HVideoPlayerMixin").initLogger.call(this,c)},_onPlayLogUnmute:function(){var a=this.getLastPlayReason();!this._unmutedWasLogged&&this.getVideoElement()&&!this.getVideoElement().muted&&a=="user_initiated"&&this._logEvent(b("VideoPlayerLoggerEvent").UNMUTED)},getLogger:function(){return this._logger},getAdClientToken:function(){var a=this.getVideoData();return a.adClientToken?a.adClientToken:null},getSavedOffline:function(){return null},logDisplayed:function(){this._logEvent(b("VideoPlayerLoggerEvent").DISPLAYED,{is_auto_played:!0})},logPauseEvent:function(a){this.onPause(a?a:{})},logEvent:function(a,b){this._logEvent(a,b)}};Object.assign(a,b("HVideoPlayerMixin"));Object.assign(a,c);e.exports=a}),null);
__d("Network",["mixInEventEmitter"],(function(a,b,c,d,e,f){__p&&__p();var g=!0,h=a.navigator.connection,i={0:"unknown",1:"ethernet",2:"wifi",3:"2g",4:"3g"};function c(){return g}function d(a){if(a==g)return;g=a;l.emit(a?"online":"offline")}function f(){return h?h.bandwidth:g?Infinity:0}function j(){return h?h.metered:!1}function k(){var a=h?String(h.type):"0";return i[a]||a}var l={getBandwidth:f,getType:k,isMetered:j,isOnline:c,setOnline:d};b("mixInEventEmitter")(l,{online:!0,offline:!0});l=l;a.addEventListener?(a.addEventListener("online",d.bind(null,!0)),a.addEventListener("offline",d.bind(null,!1))):a.attachEvent&&(a.attachEvent("online",d.bind(null,!0)),a.attachEvent("offline",d.bind(null,!1)));e.exports=l}),null);
__d("MVideoUtils",["cx","Bootloader","CSS","DataAttributeUtils","DOM","MLegacyDataStore","Network","getViewportDimensions"],(function(a,b,c,d,e,f,g){__p&&__p();var h=.5,i=0,j=null,k=null,l=null,m={PLAY_SIGIL:"playInlineVideo",INSERTION_POINT_SIGIL:"inlineVideo",LOADING_CLASS:"_2nmc",SHOWN_CLASS:"_53mu",SHOWN_CLASS_WITH_DOWNLOAD:"_2qoq",PLAYER_CLASS:"_53mv",FULL_WIDTH_PLAYER_CLASS:"_2c9v",SHOW_PAUSE_CLASS:"_3gzh",SHOW_PLAYING_CLASS:"_7bzf",SPHERICAL_CLASS:"_4a1j",DEBUGGER_CLASS:"_4551",PLAYER_STATE:{playing:"playing",paused:"paused"},API_INSTANCE_KEY:"m_video_player_api_instance_ref",createVideoNode:function(){var a={autobuffer:"true","x-webkit-airplay":"allow",controlslist:"nodownload",disablePictureInPicture:"true"};a=b("DOM").create("video",a);b("CSS").addClass(a,m.FULL_WIDTH_PLAYER_CLASS);b("CSS").addClass(a,m.PLAYER_CLASS);return a},getStoryNode:function(a){return a&&a.getNode("story-div")},_handleLoggingOnPlayWithBootload:function(a,c,d,f){__p&&__p();if(j.isLoggedIn()){f=this.getStoryNode(a)||f;if(f){a=b("DataAttributeUtils").getDataFt(f);if(a){f={ft:JSON.parse(a)};if(c){c=c.getLogger();c.setFTData(f)}d.fbid&&d.ownerID&&(a=k.parse(a,e.id),a.video_info={video_id:d.fbid,owner_id:d.ownerID},a=k.stringify(a));new l("/feedtracking/").setMethod("POST").setData({ft_data:a,clicked_uri:d.src,tn:d.trackingNodes}).send()}}}},handleLoggingOnPlay:function(a,c,d,e){b("Bootloader").loadModules(["CurrentUser","FBJSON","MRequest"],function(b,f,g){j=b,k=f,l=g,m._handleLoggingOnPlayWithBootload(a,c,d,e)},"MVideoUtils")},getHumanReadbleSize:function(a){var b=1e3,c=b*b;b=b*b*b;if(a>b)return this.formatNumber(a,b,2)+" GB";else return this.formatNumber(a,c,1)+" MB"},formatNumber:function(a,b,c){return Math.ceil(a/(b/Math.pow(10,c)))/Math.pow(10,c)},getDownloadProgressText:function(a,b){return m.getHumanReadbleSize(a)+" / "+m.getHumanReadbleSize(b)},getDownloadProgressPercentage:function(a,b){a=a/b*100;a=a.toFixed(1);return a.toString()},getConnectivityType:function(){var a=b("Network").getType(),c=null;a=="wifi"||a=="WIFI"?c="WIFI":(a=="cellular"||a=="2g"||a=="3g"||a=="wwan")&&(c="MOBILE");return c},getNetworkBandwidth:function(){var a=null;"connection"in navigator&&("downlinkMax"in navigator.connection&&(a=navigator.connection.downlinkMax));var b=null;try{b=parseFloat(a)}catch(a){}return typeof b!=="number"||isNaN(a)?null:b},getAvailableQualitiesString:function(a){return a&&a.join(", ")},isVisible:function(a){var c=b("getViewportDimensions")().height,d=b("getViewportDimensions")().width;if(a.height===0)return!1;var e=a.y-i+(1-h)*a.height,f=a.y+h*a.height,g=a.x+(1-h)*a.width;a=a.x+h*a.width;return e<0||f>=c||g<0||a>=d?!1:!0},getVideoDataFromMVideo:function(a){return b("MLegacyDataStore").get(a)}};e.exports=m}),null);
__d("MInlineVideoDebugger",["CSS","DOM","MVideoUtils"],(function(a,b,c,d,e,f){__p&&__p();a=function(){"use strict";__p&&__p();function a(a,b){this.$6=b,this.$7(a),this.$8(),this.$9(),this.$10(),this.$11()}var c=a.prototype;c.$7=function(a){this.$1=b("DOM").create("div"),b("CSS").conditionClass(this.$1,b("MVideoUtils").DEBUGGER_CLASS,!0),b("DOM").insertAfter(a,this.$1)};c.$8=function(){this.$2=b("DOM").create("div"),b("DOM").appendContent(this.$1,this.$2)};c.$9=function(){this.$3=b("DOM").create("div"),b("DOM").appendContent(this.$1,this.$3)};c.$10=function(){this.$4=b("DOM").create("div"),b("DOM").appendContent(this.$1,this.$4)};c.$11=function(){this.$5=b("DOM").create("div"),b("DOM").appendContent(this.$1,this.$5),this.updateVideoIdDebugger(this.$6.videoID)};c.updateViewabilityLoggingDebugger=function(a){b("DOM").setContent(this.$2,"viewability:"+a)};c.updatePlayerStateDebugger=function(a){b("DOM").setContent(this.$3,"player state:"+a)};c.updateLastActionReasonDebugger=function(a){b("DOM").setContent(this.$4,"lastActionReason:"+a)};c.updateVideoIdDebugger=function(a){b("DOM").setContent(this.$5,"video ID:"+a)};c.cleanUp=function(){b("DOM").remove(this.$1)};return a}();e.exports=a}),null);
__d("AsyncStorage",["Deferred","mergeDeepInto","mergeHelpers"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("mergeHelpers").ArrayStrategies,h=window.indexedDB,i=1,j="data",k=!1,l;c=Date.now();var m=new(b("Deferred"))();function a(){__p&&__p();var a=h.open("AsyncStorage",i);a.onerror=function(a){a=new Error("Failed to open AsyncStorage IndexedDB instance.");m.reject(a)};a.onsuccess=function(a){k&&!1,l=a.target.result,m.resolve({db:l}),l.onerror=function(a){a=new Error("AsyncStorage error: "+a.target.error.message);m.reject(a)}};a.onupgradeneeded=function(a){a=a.currentTarget.result;if(a.objectStoreNames&&a.objectStoreNames.contains(j))return;a.createObjectStore(j,{keyPath:"key"})}}h&&a();function n(a,b){if(l)try{a()}catch(a){b&&b(a)}else m.getPromise().then(function(){k&&!1,n(a,b)},function(a){b&&b(a)})}d={setItem:function(a,b,c){this.multiSet([[a,b]],function(a){c(a&&a[0]||null)})},getItem:function(a,b){this.multiGet([a],function(a,c){c=c!==void 0&&c[0]!==void 0&&c[0][1]!==void 0?c[0][1]:null;b(a&&a[0]||null,c)})},removeItem:function(a,b){this.multiRemove([a],function(a){b(a&&a[0]||null)})},multiGet:function(a,b){var c=[];this._multiOp(a,"readonly",function(a){return b(a,c)},function(a){return a},function(a,b,d){b&&a===b.key?(k&&!1,c.push([a,b.value.value])):c.push([a,null])})},multiSet:function(a,b){__p&&__p();if(this._persistentWritesDisabled){b(new Array(a.length).fill("writes disabled"));return}this._multiOp(a,"readwrite",b,function(a){return a[0]},function(a,b,c){if(b&&a[0]===b.key){var d=b.value;d.value=a[1];k&&!1;b.update(d)}else c.push(a)})},multiMerge:function(a,c){__p&&__p();this._multiOp(a,"readwrite",c,function(a){return a[0]},function(a,c,d){if(c&&a[0]===c.key){var e=c.value,f=JSON.parse(e.value);b("mergeDeepInto")(f,JSON.parse(a[1]),g.Clobber);k&&!1;e.value=JSON.stringify(f);c.update(e)}else k&&!1,d.push(a)})},multiRemove:function(a,b){this._multiOp(a,"readwrite",b,function(a){return a},function(a,b,c){b&&a===b.key&&(k&&!1,b["delete"]())})},getAllKeys:function(a){__p&&__p();n(function(){__p&&__p();var b=l.transaction([j],"readonly");b=b.objectStore(j).openCursor();var c=[];b.onsuccess=function(b){b=b.target.result;if(!b){a(null,c);return}c.push(b.key);b["continue"]()}},function(){return a(null,[])})},clear:function(a){__p&&__p();n(function(){__p&&__p();var b=l.transaction([j],"readwrite");b=b.objectStore(j).openCursor();b.onsuccess=function(b){b=b.target.result;if(!b){a(null);return}b["delete"]();b["continue"]()}},function(){return a(null)})},_multiOp:function(a,b,c,d,e){__p&&__p();n(function(){__p&&__p();var f=!1,g=a.slice().sort(function(a,b){a=d(a);b=d(b);if(a===b){var e=new Error("AsyncStorage._multiOp cannot process duplicate keys.");c&&c([e]);f=!0;return 0}return a<b?-1:1});if(f)return;var h=l.transaction([j],b),i=h.objectStore(j).openCursor(),m=[],n=0;i.onsuccess=function(a){__p&&__p();a=a.target.result;if(!a){while(n<g.length)e(g[n],a,m),n++;o();return}var b=a.key;k&&!1;while(d(g[n])<=b){k&&!1;e(g[n],a,m);n++;if(n===g.length){o();return}}b=d(g[n]);a["continue"](b)};function o(){var a=h.objectStore(j);m.forEach(function(b){k&&!1,a.add({key:b[0],value:b[1]})})}h.oncomplete=function(){c&&c(null)};h.onerror=function(a){a=new Error("IndexedDB error: "+a.target.error.message);c&&c([a])};k&&!1},function(a){c&&c([a])})},_persistentWritesDisabled:!1,disablePersistentWrites:function(){this._persistentWritesDisabled=!0}};e.exports=d}),null);
__d("MVideoCacheConfig",["CurrentUser","MVideoDownloadConfig","md5","WebStorage"],(function(a,b,c,d,e,f){__p&&__p();var g,h=null,i={CACHE_PREFIX:"vc",PREFIX_SEPARATOR:"_",CONFIG_PREFIX:"config",KEYS:{lastCleanUp:"lastCleanUp"},isSupported:function(){try{h||(h=g||(g=b("WebStorage")));return h.getLocalStorage()}catch(a){h=null;return!1}},currentAccountHash:function(){var a=""+b("CurrentUser").getAccountID();return b("md5")(a)},getUserPrefix:function(){return i.CACHE_PREFIX+i.PREFIX_SEPARATOR+i.currentAccountHash()+i.PREFIX_SEPARATOR},getCacheConfigKey:function(){return i.CACHE_PREFIX+i.PREFIX_SEPARATOR+i.CONFIG_PREFIX+i.PREFIX_SEPARATOR+i.currentAccountHash()},initCacheConfig:function(){var a={},c=Date.now()-2*b("MVideoDownloadConfig").cache_sync_interval_ms;a[i.KEYS.lastCleanUp]=c;a=JSON.stringify(a);c=i.getCacheConfigKey();h.getLocalStorage().setItem(c,a);return a},getCacheConfig:function(){var a=i.getCacheConfigKey();a=h.getLocalStorage().getItem(a);try{JSON.parse(a)}catch(b){a=null}a===null&&(a=i.initCacheConfig());a=JSON.parse(a);return a},getItemFromConfig:function(a){var b=i.getCacheConfig();return b[a]},setItemFromConfig:function(a,b){var c=i.getCacheConfig();c[a]=b;c=JSON.stringify(c);a=i.getCacheConfigKey();h.getLocalStorage().setItem(a,c)}};e.exports=i}),null);
__d("XHRRequestRetrier",["setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f){__p&&__p();a=function(){"use strict";__p&&__p();function a(a){this.$1=a,this.$2=!1,this.$3=0,this.$4=0,this.$5=0,this.$6=1e3,this.$7=2,this.$8=.5,this.$9=a.getErrorHandler(),a.setErrorHandler(this.$11.bind(this)),this.$10=a.getAbortHandler(),a.setAbortHandler(this.$12.bind(this))}var c=a.prototype;c.setMaxAttempts=function(a){this.$5=a;return this};c.setBaseRetryDelayMs=function(a){this.$6=a;return this};c.setRetryBackoffFactor=function(a){this.$7=a;return this};c.setRetryFuzzFactor=function(a){this.$8=a;return this};c.send=function(){if(this.$2)return;if(this.$1.getTimeout())throw new Error("Not supported.");this.$3++;this.$4||(this.$4=this.$6);this.$1.send()};c.$11=function(){this.$3<this.$5?this.$13():this.$9&&this.$9.apply(this,arguments)};c.$12=function(){this.$2=!0,this.$10&&this.$10.apply(this,arguments)};c.$13=function(){var a=this.send.bind(this),c=Math.random()*2-1;c=c*this.$8;c=this.$4*(1+c);b("setTimeoutAcrossTransitions")(a,c);this.$4*=this.$7};return a}();e.exports=a}),null);
__d("URIDownloader",["invariant","URI","XHRRequest","XHRRequestRetrier"],(function(a,b,c,d,e,f,g){__p&&__p();var h,i=2e5,j=15,k=2e3,l=1.5;a=function(){"use strict";__p&&__p();function a(a,c){this.$1=new(h||(h=b("URI")))(a),this.$2=c,this.$3=0,this.$4=0,this.$5=[]}var c=a.prototype;c.setResponseHandler=function(a){this.$10&&g(0,3234);this.$9=a;return this};c.setChunkedResponseHandler=function(a){this.$9&&g(0,3235);this.$10=a;return this};c.setErrorHandler=function(a){this.$11=a;return this};c.setAbortHandler=function(a){this.$12=a;return this};c.setProgressHandler=function(a){this.$13=a;return this};c.$14=function(a){if(this.$8)return;this.$13&&this.$13({total:this.$2,loaded:this.$4+(a?a:0)})};c.$15=function(){if(this.$8)return;if(this.$9){var a=null;this.$5&&(a=new Blob(this.$5));this.$9(a)}this.$10&&this.$10(this.$5)};c.$16=function(a){if(this.$8)return;this.$17(a)?this.$4<this.$2?(this.$14(),this.$18()):this.$15():this.$19()};c.$19=function(){if(this.$8)return;this.$11&&this.$11()};c.$20=function(){if(this.$8)return;this.$12&&this.$12()};c.$21=function(){var a=Math.min(this.$4+i,this.$2);this.$3=a-this.$4};c.$17=function(a){if(this.$8)return!1;if(this.$3!==a.size)return!1;this.$5.push(a);this.$4+=this.$3;this.$3=0;return!0};c.$18=function(){__p&&__p();var a=this;if(this.$8)return;var c=new(b("XHRRequest"))(this.$1).setMethod("GET").setResponseType("blob").setResponseHandler(this.$16.bind(this)).setErrorHandler(this.$19.bind(this)).setAbortHandler(this.$20.bind(this)).setDownloadProgressHandler(function(b){b.loadedBytes&&a.$14(b.loadedBytes)});this.$21();c.setRequestHeader("Range","bytes="+this.$4+"-"+(this.$4+this.$3-1));this.$7=c;c=new(b("XHRRequestRetrier"))(c).setMaxAttempts(j).setBaseRetryDelayMs(k).setRetryBackoffFactor(l);this.$6=c;try{c.send()}catch(a){this.$19()}};c.sendRequest=function(){this.$4=0,this.$18()};c.abort=function(){this.$8=!0,this.$7&&this.$7.abort?this.$7.abort():this.$12&&this.$12(),this.$22()};c.$22=function(){this.$7=null,this.$5=null,this.$12=null,this.$11=null,this.$9=null,this.$13=null};return a}();e.exports=a}),null);
__d("XVideoDownloadEventController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/video_download_event/",{video_id:{type:"Int",required:!0},viewer_id:{type:"Int",required:!0},app_id:{type:"Int",required:!0},event:{type:"Enum",required:!0,enumType:1}})}),null);
__d("VideoDownloadEventHandler",["CurrentUser","DataAttributeUtils","MRequest","XVideoDownloadEventController"],(function(a,b,c,d,e,f){__p&&__p();var g=412378670482;a=function(){"use strict";function a(a,b,c){this.$1=a,this.$2=b,this.$3=c}var c=a.prototype;c.sendServerDownloadEvent=function(){var a=b("XVideoDownloadEventController").getURIBuilder().setInt("video_id",this.$1).setInt("viewer_id",b("CurrentUser").getAccountID()).setInt("app_id",g).setEnum("event",this.$3).getURI(),c=null;this.$2&&(c=b("DataAttributeUtils").getDataFt(this.$2));new(b("MRequest"))(a).setMethod("POST").setData({ft_data:c}).send()};return a}();e.exports=a}),null);
__d("VideoDownloadLogger",["Bootloader","CurrentUser","md5"],(function(a,b,c,d,e,f){__p&&__p();var g=null,h=null,i=2147483647,j="video_download";function k(){return Date.now()}a=function(){"use strict";__p&&__p();function a(a){a=a?a:{},this.$1=a}var c=a.prototype;c.$2=function(a,b){b=babelHelpers["extends"]({},b,this.$1);!a;Object.prototype.hasOwnProperty.call(b,"time_ms")||(b.time_ms=k());Object.prototype.hasOwnProperty.call(b,"connectivity_type")||(b.connectivity_type=h.getConnectivityType());b={logData:b,event:a};g.post(j,b)};c.logEvent=function(a,c){!g||!h?b("Bootloader").loadModules(["Banzai","MVideoUtils"],function(b,d){g=b,h=d,this.$2(a,c)}.bind(this),"VideoDownloadLogger"):this.$2(a,c)};a.time=function(){return Math.floor(Date.now()/1e3)};a.generateSessionID=function(){return b("md5")([b("CurrentUser").getID(),a.time(),Math.random()*i].join(":"))};return a}();e.exports=a}),null);
__d("MVideoCache",["MLegacyDataStore","MVideoCacheConfig","MVideoDownloadConfig","URIDownloader","VideoDownloadEventHandler","VideoDownloadLogger","emptyFunction","AsyncStorage","WebStorage"],(function(a,b,c,d,e,f){__p&&__p();var g,h=null,i=null,j={},k=500,l=4e9,m=0,n={audio:"audio",video:"video"},o=function(){"use strict";__p&&__p();function a(a,b){this.$1=a,this.$2=b,a.chunked?this.$3=b===n.video?a.videoChunkCount:a.audioChunkCount:this.$3=1,this.$4=0}var b=a.prototype;b.getNextBuffer=function(a){if(this.$4>=this.$3)a(null);else{var b=this.$4++;p.getCachedStream(this.$1,this.$2,function(b){a(b)},a,this.$1.chunked?b:null)}};return a}(),p={DEFAULT_QUALITY_TAG:"default",DOWNLOAD_STARTED_TIME:"downloadStartedTime",DOWNLOAD_REASON:"downloadReason",OFFLINE_LIFESPAN:"offlineLifespan",VIEW_COUNT:"viewCount",RESOURCE_STATE:{loading:"loading",finished:"finished",error:"error"},ERROR:{QUOTA_EXCEEDED:1,NO_ACCESS:2},isDownloadInProgress:function(){return!p.isEmptyObject(j)},isSupported:function(){try{h||(h=b("AsyncStorage"));i||(i=g||(g=b("WebStorage")));return i.getLocalStorage()&&window.indexedDB&&navigator.webkitTemporaryStorage&&navigator.webkitTemporaryStorage.queryUsageAndQuota}catch(a){h=null;i=null;return!1}},downloadVideo:function(a,b,c,d,e,f,g,h,i){__p&&__p();g===void 0&&(g={});h===void 0&&(h="user_initiated");i===void 0&&(i=null);var j=JSON.parse(b),k=p.createVideoResource(j,f),l=p.createAudioResource(j,f);if(!k&&!l){d();return}var m=[];k&&m.push(k);l&&m.push(l);m=p.calculateTotalSize(b,f);var n=p.createTracking(a,m,j.offline_lifespan_ms,c,d,e,f,g.origin,h,i);if(!n){d();return}b={};b.event_origin=g.origin;b.event_suborigin=g.suborigin;p.logEventTracking(n,"download_requested",b);p.flushAsyncStorage(function(){navigator.webkitTemporaryStorage.queryUsageAndQuota(function(a,b){var c=p.getTotalSizeOfLoadingResources();if(a+n.totalSize+c<p.getMaxCacheUsage()&&n.totalSize+c+p.getMinFreeSpace()<b)p.downloadPostQuotaCheck(n,k,l);else{c="Used: "+a+" Remaining: "+b+" MaxCacheUsage: "+p.getMaxCacheUsage()+" MinFreeSpace: "+p.getMinFreeSpace();p.onError(n,p.ERROR.QUOTA_EXCEEDED,c)}},function(){p.onError(n,p.ERROR.QUOTA_EXCEEDED)})})},getDownloadNotificationUri:function(a){a=JSON.parse(a);return a&&a.download_finished_notification_uri},deleteVideoByID:function(a,c,d,e){__p&&__p();e===void 0&&(e={});c=c?c:b("emptyFunction");var f=p.getTracking(a),g={};g.event_origin=e.origin;g.event_suborigin=e.suborigin;g.reason=d||"user_initiated";if(f)p.logEventTracking(f,"download_cancelled",g),p.deleteTracking(f,!0);else{p.logEvent(a,"download_deleted",g);e=new(b("VideoDownloadEventHandler"))(a,null,"download_deleted");e.sendServerDownloadEvent()}p.deleteCachedVideoFromStorage(a,c)},calculateTotalSize:function(a,b){a=JSON.parse(a);a=p.getStreamsForQuality(a,b);return a&&p.calculateTotalSizeInState(a,void 0)},getQualitiesFromResources:function(a){__p&&__p();a=JSON.parse(a);a=a&&a.streams;if(!a)return null;var b=null,c={};for(var d=0;d<a.length;d++){var e=a[d],f=String(e.mimetype);if(f&&f.startsWith(n.video)){var g=Object.prototype.hasOwnProperty.call(e,"quality")&&String(e.quality);g&&(c[g]=e.size)}else f&&f.startsWith(n.audio)&&(b=e)}if(b)for(var h in c)Object.prototype.hasOwnProperty.call(c,h)&&c[h]&&(c[h]+=b.size);return c},deleteVideosByID:function(a,b,c){if(p.isSupported())for(var d=0;d<a.length;d++){var e=a[d];p.deleteVideoByID(e,function(){b(e)},c)}},isVideoDownloaded:function(a){if(p.isSupported()){a=p.getCachedVideoByID(a);if(a)return!0;else return!1}return!1},isVideoDownloading:function(a){return p.isSupported()?j&&j[a]:!1},getVideoSize:function(a,b,c){__p&&__p();if(p.isSupported()){var d=p.getTracking(a);if(d)return d.totalSize;d=p.getCachedVideoByID(a);if(d)return d.totalSize;if(b){a=p.calculateTotalSize(b,c);if(a&&a>0)return a}}return null},getVideoProgressByID:function(a){if(p.isSupported()){a=p.getTracking(a);if(a)return a.loaded}return 0},_fillMissingFieldsWithDefaults:function(a,c){for(var d=0;d<c.length;d++){var e=c[d];e===p.DOWNLOAD_STARTED_TIME&&!Object.prototype.hasOwnProperty.call(a,e)&&(a.downloadStartedTime=0);e===p.DOWNLOAD_REASON&&!Object.prototype.hasOwnProperty.call(a,e)&&(a.downloadReason="user_initiated");e===p.OFFLINE_LIFESPAN&&!Object.prototype.hasOwnProperty.call(a,e)&&(a.offlineLifespan=b("MVideoDownloadConfig").cache_default_offline_lifespan_ms)}return a},getCachedVideoByID:function(a){__p&&__p();if(!b("MVideoDownloadConfig").enabled&&!b("MVideoDownloadConfig").simulate_legacy_ux)return null;var c=p.createPrefix(a),d=null;try{d=i.getLocalStorage().getItem(c)}catch(a){}c=d&&JSON.parse(d);c=c&&p._fillMissingFieldsWithDefaults(c,[p.DOWNLOAD_STARTED_TIME,p.DOWNLOAD_REASON,p.OFFLINE_LIFESPAN]);if(b("MVideoDownloadConfig").simulate_legacy_ux)return null;if(c&&c.chunked&&!b("MVideoDownloadConfig").cache_chunked_playback_enabled){setTimeout(function(){p.deleteVideoByID(a,b("emptyFunction"),"chunked_playback_not_supported")},0);return null}return c},getCachedVideosMetadata:function(a,c){__p&&__p();a===void 0&&(a=[]);c===void 0&&(c=!1);var d={};if(!p.isSupported())return d;var e=i.getLocalStorage(),f=Object.keys(e),g=b("MVideoCacheConfig").getUserPrefix();for(var h in f)if(Object.prototype.hasOwnProperty.call(f,h)&&f[h]&&f[h].startsWith(g)){var j=p.getVideoIDFromStorageKey(f[h]),k={};if(a.length>0){var l=null;try{l=e.getItem(f[h])}catch(a){if(!c)continue}l=l&&JSON.parse(l);if((!l||l.chunked&&!b("MVideoDownloadConfig").cache_chunked_playback_enabled)&&!c)continue;for(var m=0;m<a.length;m++){var n=a[m];l&&n in l&&(k[n]=l[n])}k=p._fillMissingFieldsWithDefaults(k,a)}d[j]=k}return d},getCachedVideoIDs:function(a){a===void 0&&(a=!1);return Object.keys(p.getCachedVideosMetadata([],a))},hasDownloadedVideos:function(){var a=p.getCachedVideoIDs();return a&&a.length&&a.length>0},getDownloadingVideos:function(){var a=Object.keys(j);return a},getVideoIDFromStorageKey:function(a){var c=b("MVideoCacheConfig").PREFIX_SEPARATOR;return a.split(c)[2]||""},getCachedVideo:function(a){a=b("MLegacyDataStore").get(a);return p.getCachedVideoByID(a.videoID)},getCachedVideoStream:function(a,b,c){p.getCachedStream(a,n.video,b,c)},getCachedAudioStream:function(a,b,c){p.getCachedStream(a,n.audio,b,c)},getCachedVideoStreamObject:function(a){return new o(a,n.video)},getCachedAudioStreamObject:function(a){return new o(a,n.audio)},getMaxCacheUsage:function(){var a=l;b("MVideoDownloadConfig")&&Object.prototype.hasOwnProperty.call(b("MVideoDownloadConfig"),"max_cache_usage")&&(a=b("MVideoDownloadConfig").max_cache_usage);return a},getMinFreeSpace:function(){var a=m;b("MVideoDownloadConfig")&&Object.prototype.hasOwnProperty.call(b("MVideoDownloadConfig"),"min_free_space")&&(a=b("MVideoDownloadConfig").min_free_space);return a},downloadPostQuotaCheck:function(a,b,c){if(!p.addTracking(a)){p.onError(a);return}b&&p.sendResourceRequest(a,b);c&&p.sendResourceRequest(a,c)},calculateTotalSizeInState:function(a,b){var c,d=0,e=a.length;for(c=0;c<e;c++){var f=a[c];(!b||f.state===b)&&(d+=f.size)}return d},isEmptyObject:function(a){for(var b in a)if(Object.prototype.hasOwnProperty.call(a,b)&&a[b])return!1;return!0},getTotalSizeOfLoadingResources:function(){var a=0;for(var b in j)if(Object.prototype.hasOwnProperty.call(j,b)&&j[b]){var c=j[b];a+=p.calculateTotalSizeInState(c.resources,p.RESOURCE_STATE.loading)}return a},deleteCachedVideoFromStorage:function(a,b){__p&&__p();a=p.createPrefix(a);try{i.getLocalStorage().removeItem(a)}catch(a){}p.getObjectKeysFromAsyncStorageByPrefix(a,function(a,c){if(a||!c){b();return}try{h.multiRemove(c,function(){b()})}catch(a){b()}})},flushAsyncStorage:function(a){__p&&__p();var b=p.createPrefix(0),c=["0"];c=new Blob(c,{type:"text/html"});try{h.setItem(b,c,function(){try{h.removeItem(b,function(){a()})}catch(b){a()}})}catch(c){try{h.removeItem(b,function(){a()})}catch(b){a()}}},getObjectKeysFromAsyncStorageByPrefix:function(a,b){__p&&__p();try{h.getAllKeys(function(c,d){if(c||!d){b(c);return}d=d.filter(function(b){return b.startsWith(a)});b(null,d)})}catch(a){b(a)}},getVideosFromAsyncStorage:function(a){__p&&__p();p.getObjectKeysFromAsyncStorageByPrefix(b("MVideoCacheConfig").getUserPrefix(),function(b,c){if(b||!c){a(b);return}b=c.map(p.getVideoIDFromStorageKey);c=b.reduce(function(a,b){a[b]=!0;return a},{});a(null,Object.keys(c))})},makeLocalAsyncStorageConsistent:function(a,b){__p&&__p();var c=p.getCachedVideoIDs(!0);p.getVideosFromAsyncStorage(function(d,e){__p&&__p();if(d||!e){a();return}var f={};d=c.concat(e);d.forEach(function(a){!f[a]?f[a]=1:f[a]++});f=Object.keys(f).filter(function(a){return f[a]===1});f.length>0&&p.deleteVideosByID(f,b,"consistency_check");a()})},getCachedStream:function(a,b,c,d,e){b=p.createPrefix(a.videoID,b,e);try{h.getItem(b,function(b,e){b?(p.deleteVideoByID(a.videoID),d()):c(e)})}catch(b){p.deleteVideoByID(a.videoID),d()}},saveVideoInLocalStorage:function(a){var b=a.videoID&&p.createPrefix(a.videoID);try{i.getLocalStorage().setItem(b,JSON.stringify(a))}catch(a){throw a}},saveCachedVideo:function(a){__p&&__p();var b={};b.downloadStartedTime=a.downloadStartedTime;b.downloadReason=a.downloadReason;b.videoID=a.videoID;b.quality=a.quality;b.audioCodec=p.getResourceCodec(a,n.audio);b.videoCodec=p.getResourceCodec(a,n.video);b.totalSize=a.totalSize;b.offlineLifespan=a.offlineLifespan;b.viewCount=0;b.sessionID=a.sessionID;b.downloadOrigin=a.origin;b.chunked=a.chunked;b.videoChunkCount=a.videoChunkCount;b.audioChunkCount=a.audioChunkCount;p.saveVideoInLocalStorage(b)},logPlaybackRequest:function(a,b,c){__p&&__p();var d=null;if(b){b=p.getCachedVideoByID(a);var e=b.viewCount||0;b.viewCount=e+1;p.saveVideoInLocalStorage(b)}else d=p.ERROR.NO_ACCESS;e={};e.error_code=d;e.reason=c;p.logEvent(a,"requested_playing",e)},createPrefix:function(a,c,d){a=b("MVideoCacheConfig").getUserPrefix()+a+b("MVideoCacheConfig").PREFIX_SEPARATOR+p.DEFAULT_QUALITY_TAG;c&&(a=a+b("MVideoCacheConfig").PREFIX_SEPARATOR+c);d!=void 0&&d!=null&&(a=a+b("MVideoCacheConfig").PREFIX_SEPARATOR+d);return a},createResource:function(a,b,c,d){var e={};e.src=a;e.type=b;e.state=p.RESOURCE_STATE.loading;e.codec=c;e.size=d;e.progress=0;return e},getDefaultVideoStream:function(a){__p&&__p();var b=null;for(var c=0;c<a.length;c++){var d=a[c],e=String(d.mimetype);if(e&&e.startsWith(n.video)){b=d;if(d["default"])return d}}return b},getStreamsForQuality:function(a,b){__p&&__p();var c=[];a=a&&a.streams;var d=!1,e=!1;for(var f=0;f<a.length;f++){var g=a[f],h=String(g.mimetype);if(h&&h.startsWith(n.video)&&!d){var i=String(g.quality);b&&i&&i===b&&(d=!!c.push(g))}else h&&h.startsWith(n.audio)&&!e&&(e=!!c.push(g))}if(!d){i=p.getDefaultVideoStream(a);i&&c.push(i)}return c},getUrlInfo:function(a,b,c){__p&&__p();a=p.getStreamsForQuality(a,c);if(!a)return null;c=null;for(var d=0;d<a.length;d++){var e=a[d],f=String(e.mimetype);if(f&&f.startsWith(b)){c=e;break}}return c},createVideoResource:function(a,b){a=p.getUrlInfo(a,n.video,b);return a&&p.createResource(a.url,n.video,a.codecs,a.size)},createAudioResource:function(a,b){a=p.getUrlInfo(a,n.audio,b);return a&&p.createResource(a.url,n.audio,a.codecs,a.size)},addTracking:function(a){if(j[a.videoID])return!1;j[a.videoID]=a;return!0},createTracking:function(a,c,d,e,f,g,h,i,j,k){__p&&__p();var l={};l.videoID=a;l.quality=h||p.DEFAULT_QUALITY_TAG;l.onDone=e;l.onError=f;l.onProgress=g;l.resources=[];l.deleted=!1;l.loaded=0;l.totalSize=c;l.offlineLifespan=d;l.sessionID=b("VideoDownloadLogger").generateSessionID();l.origin=i;l.logger=p.createLogger(l);l.downloadStartedTime=Date.now();l.chunked=b("MVideoDownloadConfig").cache_chunked_storage_enabled;l.loggingDataCallback=k;l.downloadReason=j;return l},getTracking:function(a){return j[a]},deleteTracking:function(a,b){__p&&__p();var c={};c.reason=a.downloadReason;if(!a.deleted){a.deleted=!0;j[a.videoID]=null;if(b){for(b=0;b<a.resources.length;b++)try{a.resources[b].downloader&&a.resources[b].downloader.abort()}catch(b){p.logEventTracking(a,"download_failed",c)}}}},getResourceCodec:function(a,b){var c,d,e;e=a.resources.length;for(d=0;d<e;d++){c=a.resources[d];if(c.type===b)return c.codec}return null},updateTracking:function(a,b,c){__p&&__p();var d,e;if(a.deleted)return;c&&(b.state=c);b.state===p.RESOURCE_STATE.finished&&(b.type===n.video?a.videoChunkCount=b.chunkCount:b.type===n.audio&&(a.audioChunkCount=b.chunkCount));if(b.state===p.RESOURCE_STATE.loading)a.resources.push(b);else{c=p.RESOURCE_STATE.finished;b=a.resources.length;for(d=0;d<b;d++){e=a.resources[d];if(e.state===p.RESOURCE_STATE.loading){c=p.RESOURCE_STATE.loading;break}else e.state===p.RESOURCE_STATE.error&&(c=p.RESOURCE_STATE.error)}if(c===p.RESOURCE_STATE.error)p.deleteTracking(a),p.deleteCachedVideoFromStorage(a.videoID,function(){p.onError(a)});else if(c===p.RESOURCE_STATE.finished)try{p.saveCachedVideo(a),p.deleteTracking(a),p.onDone(a)}catch(b){p.deleteCachedVideoFromStorage(a.videoID,function(){p.onError(a)})}}},trackProgress:function(a){var b=0;for(var c in a.resources)Object.prototype.hasOwnProperty.call(a.resources,c)&&(b+=a.resources[c].progress);a.loaded=b;var d={};d.bytes_downloaded=a.loaded;p.logEventTracking(a,"download_progress",d);return b},sendResourceRequest:function(a,c){__p&&__p();var d=new(b("URIDownloader"))(c.src,c.size);a.chunked?d.setChunkedResponseHandler(function(b){__p&&__p();try{var d=[];for(var e=0;e<b.length;e++){var f=[],g=p.createPrefix(a.videoID,c.type,e);f.push(g);g=b[e];f.push(g);d.push(f)}h.multiSet(d,function(d){c.chunkCount=b.length,p.updateTracking(a,c,d?p.RESOURCE_STATE.error:p.RESOURCE_STATE.finished)})}catch(b){p.updateTracking(a,c,p.RESOURCE_STATE.error)}}):d.setResponseHandler(function(b){try{var d=p.createPrefix(a.videoID,c.type);h.setItem(d,b,function(b){p.updateTracking(a,c,b?p.RESOURCE_STATE.error:p.RESOURCE_STATE.finished)})}catch(b){p.updateTracking(a,c,p.RESOURCE_STATE.error)}});d.setErrorHandler(function(){p.updateTracking(a,c,p.RESOURCE_STATE.error)});d.setProgressHandler(function(b){b.total&&(c.progress=b.loaded,a.onProgress(p.trackProgress(a),a.totalSize))});d.setAbortHandler(function(){setTimeout(function(){p.updateTracking(a,c,p.RESOURCE_STATE.error)},k)});p.updateTracking(a,c);c.downloader=d;d.sendRequest()},createLogger:function(a){var c={};c.download_origin=a.origin;c.quality=a.quality;c.session_id=a.sessionID;c.total_size=a.totalSize;c.video_id=a.videoID;return new(b("VideoDownloadLogger"))(c)},getLogger:function(a){return!a.logger?null:a.logger},logEvent:function(a,c,d){var e=new(b("VideoDownloadLogger"))();d=d||{};d.video_id=a;a=p.getCachedVideoByID(a);a&&(d.download_origin=a.downloadOrigin,d.session_id=a.sessionID,d.total_size=a.totalSize,d.quality=d.quality?d.quality:a.quality,d.saved_offline=1);e.logEvent(c,d)},logEventTracking:function(a,b,c){var d=this.getLogger(a);c=c||{};Object.prototype.hasOwnProperty.call(c,"reason")||(c.reason=a.downloadReason);if(a.loggingDataCallback){var e=a.loggingDataCallback;c=e(c)}c.elapsed_time_ms=Date.now()-a.downloadStartedTime;d.logEvent(b,c)},onError:function(a,b,c){var d={};d.error_code=b;d.error=c;p.logEventTracking(a,"download_failed",d);a.onError(b)},onDone:function(a){p.logEventTracking(a,"download_finished"),a.onDone()}};e.exports=p}),null);
__d("SubRipText",[],(function(a,b,c,d,e,f){__p&&__p();var g={size:"90%"};function h(a){__p&&__p();var b=Number(a.substr(0,a.length-1)),c=a.substr(-1);switch(c){case"s":return b;case"m":return b*60;case"h":return b*3600}c=a.split(":");b=Number(c[c.length-1].replace(/,/,"."));c.length>1&&(b+=Number(c[c.length-2])*60);c.length>2&&(b+=Number(c[c.length-3])*3600);return b}function i(a){__p&&__p();a=a.split(/\r\n|\r|\n/).map(function(a){return a.trim()});var b=[],c=0;do{var d=a.indexOf("",c);d<0&&(d=a.length);var e=k(a.slice(c,d));e&&b.push(e);c=d+1}while(c>0&&c<a.length);return b}function j(a){a=a.split("-->");if(a.length!=2)return null;var b=h(a[0].trim());a=h(a[1].trim());return Number.isNaN(a)||Number.isNaN(b)?null:{begin:b,end:a}}function k(a){if(a.length<3)return null;var b=l(a[0]),c=j(a[1]);return!c?null:{counter:b,begin:c.begin,end:c.end,text:a.slice(2,6)}}function l(a){return Number(a.trim())}function m(a){a=a.split(".");return a[0].length<2?"0"+a.join("."):a.join(".")}function n(a){var b=m(Math.floor(a/3600).toString()),c=m(Math.floor(a%3600/60).toString());a=m((a%60).toFixed(3));return b+":"+c+":"+a}function o(a,b,c){var d="";if(c)for(var e in c)d+=" "+e+":"+c[e];return n(a)+" --> "+n(b)+d}function p(a,b){return a.counter+"\n"+o(a.begin,a.end,b)+"\n"+a.text.join("\n")+"\n"}function q(a,b){return"WEBVTT\n\n"+a.map(function(a){return p(a,b)}).join("\n")}a=function(){"use strict";__p&&__p();function a(a){var b=this;this.$1=i(a);this.$1.sort(function(a,b){return a.counter-b.counter});this.$2=this.$1.map(function(a,b){return b}).sort(function(a,c){return b.$1[a].begin-b.$1[c].begin});this.invalidateCache();this.$6=g}var b=a.prototype;b.$7=function(a){return this.$1[this.$2[a]]};b.$8=function(a){var b=this.$3;while(b<this.$2.length){var c=this.$7(b);if(c.begin<=a)this.$4.push(c),b++;else break}this.$3=b};b.$9=function(a){this.$4=this.$4.filter(function(b){return b.end>a})};b.invalidateCache=function(){this.$5=0,this.$4=[],this.$3=0};b.setStyle=function(a){this.$6=a};b.getSubtitles=function(a){a<this.$5&&this.invalidateCache();this.$5=a;this.$8(a);this.$9(a);return this.$4.reduce(function(a,b){return a.concat(b.text)},[])};b.renderVTT=function(){return q(this.$1,this.$6)};return a}();e.exports=a}),null);
__d("MVideoSubtitles",["fbt","DOM","EventListener","SubRipText","XHRRequest","emptyFunction","getCrossOriginTransport"],(function(a,b,c,d,e,f,g){__p&&__p();var h=a.URL||a.webkitURL;c=function(){"use strict";__p&&__p();function a(a){this.$1=a,this.$2=b("emptyFunction")}var c=a.prototype;c.$3=function(a){a=new(b("SubRipText"))(a);a=new Blob([a.renderVTT()],{type:"text/vtt"});return h.createObjectURL(a)};c.loadSubtitles=function(a){var c=this;if(!h)return;new(b("XHRRequest"))(a).setTransportBuilder(b("getCrossOriginTransport")).setMethod("GET").setResponseHandler(function(a){c.$4(c.$3(a))}).send()};c.$4=function(a){var c=this;a=b("DOM").create("track",{label:g._("B\u1eadt"),kind:"captions",src:a});b("EventListener").listen(a,"load",function(){c.$2()});b("DOM").appendContent(this.$1,a);this.hideSubtitles()};c.showSubtitles=function(){Array.prototype.forEach.call(this.$1.textTracks,function(a){return a.mode="showing"})};c.hideSubtitles=function(){Array.prototype.forEach.call(this.$1.textTracks,function(a){return a.mode="hidden"})};c.setOnSubtitlesReady=function(a){this.$2=a};return a}();e.exports=c}),null);
__d("MVideoViewability",["MFullScreen","Visibility","getElementPosition","getViewportDimensions"],(function(a,b,c,d,e,f){__p&&__p();var g={shouldLog:function(a){return!!a&&a.videoViewabilityLoggingEnabled&&a.videoViewabilityLoggingPollingRate>0},calculateViewabilityPercentage:function(a){__p&&__p();if(b("MFullScreen").isFullScreen())return 100;if(b("Visibility").isHidden())return-2;a=g.calculateViewabilityPercentageNumber(b("getElementPosition")(a));if(a===0)return-2;else if(a<25)return 0;else if(a<50)return 25;else if(a<75)return 50;else if(a<100)return 75;else return 100},calculateViewabilityPercentageNumber:function(a){var c=b("getViewportDimensions")().width,d=b("getViewportDimensions")().height;if(a.width===0||a.height===0)return 0;var e=a.x,f=a.x+a.width,g=a.y,h=a.y+a.height;if(f<=0||e>=c||h<=0||g>=d)return 0;f=Math.min(f,c)-Math.max(e,0);c=Math.min(h,d)-Math.max(g,0);return f*c*100/(a.width*a.height)}};e.exports=g}),null);
__d("oz-player/loggings/OzPreInitLogger",["oz-player/shims/OzEventEmitter","oz-player/loggings/OzOperationLoggerBase","oz-player/loggings/OzPerfLoggerProviderBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=function(b){babelHelpers.inheritsLoose(a,b);function a(a,c){a=b.call(this,a)||this;a.$OzPreInitOperationLogger1=c;return a}var c=a.prototype;c.log=function(){b.prototype.log.call(this),this.$OzPreInitOperationLogger1(this)};return a}(b("oz-player/loggings/OzOperationLoggerBase"));a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$OzPreInitLoggerProvider1=!1,d.$OzPreInitLoggerProvider2=[],d.$OzPreInitLoggerProvider3=new(b("oz-player/shims/OzEventEmitter"))(),c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.deactivate=function(){this.$OzPreInitLoggerProvider1=!1};d.activate=function(){var a=this;this.$OzPreInitLoggerProvider1=!0;this.$OzPreInitLoggerProvider2.forEach(function(b){a.$OzPreInitLoggerProvider3.emit("operation_logged",b)});this.$OzPreInitLoggerProvider2=[]};d.setOperationLoggedListener=function(a){return this.$OzPreInitLoggerProvider3.addListener("operation_logged",function(b){a(b)})};d.createOperationLogger=function(a){var b=this;a=new g(a,function(a){b.$OzPreInitLoggerProvider1?b.$OzPreInitLoggerProvider3.emit("operation_logged",a):b.$OzPreInitLoggerProvider2.push(a)});return a};d.createLoggerProvider=function(){return new c()};return c}(b("oz-player/loggings/OzPerfLoggerProviderBase"));e.exports={OzPreInitLoggerProvider:a}}),null);
__d("MVideoPlayerApiBase",["invariant","Promise","BanzaiODS","Bootloader","CSS","DataAttributeUtils","DOM","EventEmitter","EventListener","HVideoPlayerLoggerMixin","MFullScreen","MInlineVideoDebugger","MParent","MVideoCache","MVideoExperiments","MVideoSubtitles","MVideoUtils","MVideoViewability","Stratcom","StratcomManager","SubscriptionsHandler","URI","VideoViewabilityKeyEvents","clearInterval","gkx","isCdnURI","mixin","oz-player/loggings/OzPreInitLogger","qex","setInterval","setTimeoutAcrossTransitions","throttle"],(function(a,b,c,d,e,f,g){__p&&__p();var h,i=b("oz-player/loggings/OzPreInitLogger").OzPreInitLoggerProvider,j={CONSTRUCTED:"constructed",INIT_DONE:"init_done",CREATED:"created",FIRST_PLAYING:"first_playing",PLAYING:"playing",CANCELLED_REQUEST_PLAYING:"cancelled_request_playing",PAUSE_WITHOUT_PLAY:"pause_without_play",PAUSED:"paused",ENDED:"ended",FIRST_REQUESTED_PLAYING:"first_requested_playing",REQUESTED_PLAYING:"requested_playing",FIRST_VIDEO_PLAY:"first_video_play",VIDEO_PLAY:"video_play",RESCHEDULE_VIDEO_PLAY:"reschedule_video_play",REQUESTED_PAUSE_BEFORE_STARTED_PLAYING:"requested_pause_before_started_playing",REQUESTED_PAUSE:"requested_pause",DESTROYED_REQUESTED_PLAYING:"destroyed_requested_playing",DESTROY:"destroy"},k=["canplay","play","seeked","seeking"],l=100,m=1e3/15,n=3e4;a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(c){__p&&__p();var d;d=a.call(this)||this;d.eventEmitter=new(b("EventEmitter"))();d.$MVideoPlayerApiBase13=!1;d.$MVideoPlayerApiBase28=!1;d.$MVideoPlayerApiBase29=0;d.$MVideoPlayerApiBase30=!1;d.$MVideoPlayerApiBase52=function(){var a=d.getVideoElement();b("Stratcom").invoke("m:video:player:fullscreenchange",null,{videoElement:d.$MVideoPlayerApiBase1,player:a});var c=b("MFullScreen").isFullScreen();b("MVideoExperiments").do_not_stretch_fullscreen&&b("CSS").conditionClass(a,b("MVideoUtils").FULL_WIDTH_PLAYER_CLASS,!c);d.handleFullScreenBehaviour(c,a);d.logEvent(c?"entered_fs":"exited_fs")};d.$MVideoPlayerApiBase53=function(){d.getVideoElement().readyState>=2&&d.$MVideoPlayerApiBase13&&d.$MVideoPlayerApiBase54()};d.$MVideoPlayerApiBase40=function(){b("Stratcom").invoke("m:video:player:play",null,{videoElement:d.$MVideoPlayerApiBase1,player:d.getVideoElement()}),d.toggleClassOnMVideoElement(b("MVideoUtils").SHOW_PAUSE_CLASS,!1),d.$MVideoPlayerApiBase55()};d.$MVideoPlayerApiBase41=function(){d.$MVideoPlayerApiBase39(j.FIRST_PLAYING),d.$MVideoPlayerApiBase33(j.PLAYING),d.$MVideoPlayerApiBase9=!1,b("Stratcom").invoke("m:video:player:playing",null,{videoElement:d.$MVideoPlayerApiBase1,player:d.getVideoElement()}),d.hideLoadingSpinner(),d.$MVideoPlayerApiBase56(),d.$MVideoPlayerApiBase24&&d.$MVideoPlayerApiBase24.log(),d.$MVideoPlayerApiBase24=null,d.heartbeatEnabled()&&d.$MVideoPlayerApiBase57(),d.eventEmitter.emit("playing")};d.$MVideoPlayerApiBase42=function(a){d.$MVideoPlayerApiBase58(),d.$MVideoPlayerApiBase9=!1,d.$MVideoPlayerApiBase24&&(d.$MVideoPlayerApiBase24.setResult("aborted").log(),d.$MVideoPlayerApiBase24=null),b("Stratcom").invoke("m:video:player:pause",null,{videoElement:d.$MVideoPlayerApiBase1,player:d.getVideoElement(),destroyed:a}),b("MVideoExperiments").mtouch_prevent_consequent_calls||d.$MVideoPlayerApiBase59(!1),d.hideLoadingSpinner(),d.$MVideoPlayerApiBase60(),d.$MVideoPlayerApiBase61(),d.$MVideoPlayerApiBase62(),d.$MVideoPlayerApiBase25&&(d.$MVideoPlayerApiBase25.log(),d.$MVideoPlayerApiBase25=null),d.eventEmitter.emit("paused")};d.$MVideoPlayerApiBase43=function(){__p&&__p();if(d.$MVideoPlayerApiBase3.loop&&d.$MVideoPlayerApiBase3.numOfLoops&&!d.$MVideoPlayerApiBase3.playEndSec&&!d.$MVideoPlayerApiBase3.playStartSec&&b("gkx")("1086729")){d.$MVideoPlayerApiBase29++;if(d.$MVideoPlayerApiBase29<d.$MVideoPlayerApiBase3.numOfLoops){d.play("loop_initiated");return}}d.$MVideoPlayerApiBase33(j.ENDED);b("Stratcom").invoke("m:video:player:ended",null,{videoElement:d.$MVideoPlayerApiBase1,player:d.getVideoElement()});d.$MVideoPlayerApiBase9=!1;d.$MVideoPlayerApiBase60();d.$MVideoPlayerApiBase3.playOnClick&&d.$MVideoPlayerApiBase3.playInFullScreen&&b("MFullScreen").isSupported()&&b("MFullScreen").disableFullScreen();d.eventEmitter.emit("finished")};d.$MVideoPlayerApiBase44=function(){d.showLoadingSpinner()};d.$MVideoPlayerApiBase48=function(){d.$MVideoPlayerApiBase9=!0};d.$MVideoPlayerApiBase49=function(){d.$MVideoPlayerApiBase9=!1,d.$MVideoPlayerApiBase7&&(d.$MVideoPlayerApiBase8=!0,d.$MVideoPlayerApiBase60(),d.logPauseEvent({lastPauseReason:"seek_initiated"}))};d.$MVideoPlayerApiBase45=function(){var a=d.getVideoElement().volume;d.$MVideoPlayerApiBase14!==void 0&&(d.$MVideoPlayerApiBase14===0&&a!==0?d.eventEmitter.emit("unmuted"):d.$MVideoPlayerApiBase14!==0&&a===0&&d.eventEmitter.emit("muted"),d.eventEmitter.emit("changeVolume",{volume:a}));d.$MVideoPlayerApiBase14=a;if(d.$MVideoPlayerApiBase27){d.$MVideoPlayerApiBase27=!1;return}b("Stratcom").invoke("m:video:player:volumechange",null,{videoElement:d.$MVideoPlayerApiBase1,player:d.getVideoElement()})};d.$MVideoPlayerApiBase46=function(){d.hideLoadingSpinner()};d.$MVideoPlayerApiBase50=function(){!d.$MVideoPlayerApiBase6&&d.getLastActionReason()==="page_visibility_initiated"&&d.play("user_initiated")};d.$MVideoPlayerApiBase51=function(){d.$MVideoPlayerApiBase6&&d.pause("page_visibility_initiated")};d.$MVideoPlayerApiBase47=function(){d.$MVideoPlayerApiBase3.playStartSec&&d.$MVideoPlayerApiBase3.playStartSec>0&&(d.getVideoElement().currentTime=d.$MVideoPlayerApiBase3.playStartSec),d.eventEmitter.emit("updateMetadata")};d.$MVideoPlayerApiBase63=function(){var a=d.$MVideoPlayerApiBase16;d.$MVideoPlayerApiBase66();if(d.$MVideoPlayerApiBase16!==a){d.logEvent("viewability_changed",(a={},a.current_viewability_percentage=d.$MVideoPlayerApiBase16,a))}};d.hideLoadingSpinner=function(){d.toggleClassOnMVideoElement(b("MVideoUtils").LOADING_CLASS,!1)};d.showLoadingSpinner=function(){d.toggleClassOnMVideoElement(b("MVideoUtils").LOADING_CLASS,!0)};d.toggleVideoQuality=function(){};d.getVideoQuality=function(){return d.$MVideoPlayerApiBase3.defaultQuality};d.$MVideoPlayerApiBase70=function(){if(!d.$MVideoPlayerApiBase7||!d.getVideoElement()){d.$MVideoPlayerApiBase62();return}d.logHeartbeat()};d.$MVideoPlayerApiBase1=c;d.$MVideoPlayerApiBase3=b("MVideoUtils").getVideoDataFromMVideo(d.$MVideoPlayerApiBase1);d.$MVideoPlayerApiBase3[b("MVideoUtils").API_INSTANCE_KEY]=babelHelpers.assertThisInitialized(d);d.$MVideoPlayerApiBase23=new i();d.$MVideoPlayerApiBase18=b("throttle").withBlocking(d.$MVideoPlayerApiBase31,m,babelHelpers.assertThisInitialized(d));d.$MVideoPlayerApiBase19=b("throttle").withBlocking(d.$MVideoPlayerApiBase32,m,babelHelpers.assertThisInitialized(d));return d}var d=c.prototype;d.setup=function(){};d.init=function(a){__p&&__p();var c=this;this.reset();this.$MVideoPlayerApiBase28=!0;a&&(this.$MVideoPlayerApiBase2=a);this.$MVideoPlayerApiBase33(j.CONSTRUCTED);this.$MVideoPlayerApiBase3.videoInitSeqID===null||this.$MVideoPlayerApiBase3.videoInitSeqID===void 0?this.$MVideoPlayerApiBase3.videoInitSeqID=0:this.$MVideoPlayerApiBase3.videoInitSeqID=1+this.$MVideoPlayerApiBase3.videoInitSeqID;this.$MVideoPlayerApiBase4=new(b("SubscriptionsHandler"))();this.prepareDOMNode();k.forEach(function(a){b("StratcomManager").enableDispatch(c.getVideoElement(),a)});this.$MVideoPlayerApiBase34();this.$MVideoPlayerApiBase35(a);this.$MVideoPlayerApiBase22=!0;this.$MVideoPlayerApiBase36();this.$MVideoPlayerApiBase3.videoDebuggerEnabled&&(this.$MVideoPlayerApiBase10=new(b("MInlineVideoDebugger"))(this.$MVideoPlayerApiBase1,this.$MVideoPlayerApiBase3),this.$MVideoPlayerApiBase10.updateLastActionReasonDebugger(this.getLastActionReason()));this.$MVideoPlayerApiBase15=b("MVideoViewability").shouldLog(this.$MVideoPlayerApiBase3);this.$MVideoPlayerApiBase3.loop&&this.$MVideoPlayerApiBase3.numOfLoops===null&&(this.getVideoElement().setAttribute("loop","true"),this.getVideoElement().loop=!0);b("Stratcom").invoke("m:video:player:init",null,{apiInstance:this});this.$MVideoPlayerApiBase33(j.INIT_DONE);this.postInit();this.$MVideoPlayerApiBase33(j.CREATED)};d.$MVideoPlayerApiBase34=function(){this.initLogger();var a=b("MParent").bySigil(this.$MVideoPlayerApiBase1,"story-div");if(a){a=b("DataAttributeUtils").getDataFt(a);a={ft:JSON.parse(a)};this.getLogger().setFTData(a)}};d.$MVideoPlayerApiBase37=function(){var a;this.$MVideoPlayerApiBase3.videoElement?this.$MVideoPlayerApiBase3.videoElement:(this.$MVideoPlayerApiBase33("create_new_video_node"),a=b("MVideoUtils").createVideoNode(),this.$MVideoPlayerApiBase3.videoElement=a)};d.$MVideoPlayerApiBase38=function(a){return this.$MVideoPlayerApiBase21.has(a)};d.$MVideoPlayerApiBase39=function(a){this.$MVideoPlayerApiBase33(a,!0)};d.$MVideoPlayerApiBase33=function(a,c){c===void 0&&(c=!1);if(!b("MVideoExperiments").mtouch_enable_playback_funnel_counters)return;var d=this.getPlayerVersion();if(c&&this.$MVideoPlayerApiBase38(a))return;this.$MVideoPlayerApiBase21.add(a);b("BanzaiODS").bumpEntityKey(2966,"mtouch_video."+d+"."+this.$MVideoPlayerApiBase2,a)};d.reset=function(){this.$MVideoPlayerApiBase28&&g(0,5251),this.$MVideoPlayerApiBase2="user_initiated",this.$MVideoPlayerApiBase5=!0,this.$MVideoPlayerApiBase6=!1,this.$MVideoPlayerApiBase7=!1,this.$MVideoPlayerApiBase8=!1,this.$MVideoPlayerApiBase9=!1,this.$MVideoPlayerApiBase10=null,this.$MVideoPlayerApiBase11="user_initiated",this.$MVideoPlayerApiBase12=void 0,this.$MVideoPlayerApiBase15=!1,this.$MVideoPlayerApiBase16=void 0,this.$MVideoPlayerApiBase17=void 0,this.$MVideoPlayerApiBase20=void 0,this.$MVideoPlayerApiBase21=new Set([]),this.$MVideoPlayerApiBase22=!1,this.$MVideoPlayerApiBase24=void 0,this.$MVideoPlayerApiBase25=void 0,this.$MVideoPlayerApiBase26=void 0,this.$MVideoPlayerApiBase27=!1,this.$MVideoPlayerApiBase29=0,this.$MVideoPlayerApiBase30=!1};d.postInit=function(){};d.prepareDOMNode=function(){this.$MVideoPlayerApiBase3.videoElement&&this.$MVideoPlayerApiBase33("consume_precreated_video_node");this.$MVideoPlayerApiBase37();var a=this.getVideoElement();a.controls=!(b("MVideoExperiments").enableSphericalVideo&&this.$MVideoPlayerApiBase3.spherical)&&!this.$MVideoPlayerApiBase3.disableVideoControls;b("DOM").prependContent(this.$MVideoPlayerApiBase1,a);a.setAttribute("playInFullScreen",this.$MVideoPlayerApiBase3.playInFullScreen);!this.$MVideoPlayerApiBase3.playInFullScreen&&this.$MVideoPlayerApiBase3.shouldPlayInline&&a.setAttribute("playsinline","true");this.$MVideoPlayerApiBase3.muted&&(a.muted=!0,this.shouldIgnoreInitialMuteOperation()&&(this.$MVideoPlayerApiBase27=!0))};d.$MVideoPlayerApiBase36=function(){__p&&__p();var a=this,c;this.$MVideoPlayerApiBase4.addSubscriptions(b("Stratcom").listen("m:page:unload",null,function(){a.release(),b("Stratcom").removeCurrentListener()}));var d=this.getVideoElement();this.$MVideoPlayerApiBase4.addSubscriptions((c=b("EventListener")).listen(d,"play",this.$MVideoPlayerApiBase40),c.listen(d,"playing",this.$MVideoPlayerApiBase41),c.listen(d,"pause",this.$MVideoPlayerApiBase42),c.listen(d,"ended",this.$MVideoPlayerApiBase43),c.listen(d,"waiting",this.$MVideoPlayerApiBase44),c.listen(d,"timeupdate",this.onTimeUpdateBase.bind(this)),c.listen(d,"volumechange",this.$MVideoPlayerApiBase45),c.listen(d,"canplay",this.$MVideoPlayerApiBase46),c.listen(d,"loadedmetadata",this.$MVideoPlayerApiBase47),c.listen(this.getVideoElement(),"contextmenu",function(a){a.preventDefault()}));b("MVideoExperiments").use_shared_seeking||this.$MVideoPlayerApiBase4.addSubscriptions(b("EventListener").listen(d,"seeked",this.$MVideoPlayerApiBase48),b("EventListener").listen(d,"seeking",this.$MVideoPlayerApiBase49));this.$MVideoPlayerApiBase4.addSubscriptions(b("EventListener").listen(window,"focus",this.$MVideoPlayerApiBase50),b("EventListener").listen(window,"blur",this.$MVideoPlayerApiBase51));b("MFullScreen").isSupported()&&this.$MVideoPlayerApiBase4.addSubscriptions(b("MFullScreen").listenForFullScreenEvent(window,this.$MVideoPlayerApiBase52));b("MVideoExperiments").listen_readystate_to_play&&this.$MVideoPlayerApiBase4.addSubscriptions(b("EventListener").listen(d,"loadeddata",this.$MVideoPlayerApiBase53))};d.$MVideoPlayerApiBase58=function(){this.$MVideoPlayerApiBase38(j.FIRST_REQUESTED_PLAYING)?this.$MVideoPlayerApiBase38(j.FIRST_PLAYING)||this.$MVideoPlayerApiBase39(j.CANCELLED_REQUEST_PLAYING):this.$MVideoPlayerApiBase33(j.PAUSE_WITHOUT_PLAY),this.$MVideoPlayerApiBase33(j.PAUSED)};d.$MVideoPlayerApiBase55=function(){this.$MVideoPlayerApiBase15&&(this.$MVideoPlayerApiBase17=b("setInterval")(this.$MVideoPlayerApiBase63,this.$MVideoPlayerApiBase3.videoViewabilityLoggingPollingRate))};d.$MVideoPlayerApiBase61=function(){b("clearInterval")(this.$MVideoPlayerApiBase17)};d.onTimeUpdateBase=function(a){this.$MVideoPlayerApiBase8&&this.$MVideoPlayerApiBase9&&(this.$MVideoPlayerApiBase9=!1,this.$MVideoPlayerApiBase64()),this.$MVideoPlayerApiBase18(),this.$MVideoPlayerApiBase19(),this.eventEmitter.emit("updateStatus",{position:this.getCurrentTimePosition()})};d.$MVideoPlayerApiBase64=function(){this.logEvent("requested_playing",{debug_reason:"seek_initiated"}),this.onPlaying(),this.$MVideoPlayerApiBase56(),this.$MVideoPlayerApiBase8=!1};d.$MVideoPlayerApiBase56=function(){b("qex")._("773042")&&this.toggleClassOnMVideoElement(b("MVideoUtils").SHOW_PLAYING_CLASS,!0),this.$MVideoPlayerApiBase7=!0};d.$MVideoPlayerApiBase60=function(){b("qex")._("773042")&&this.toggleClassOnMVideoElement(b("MVideoUtils").SHOW_PLAYING_CLASS,!1),this.$MVideoPlayerApiBase7=!1};d.$MVideoPlayerApiBase65=function(){this.$MVideoPlayerApiBase10&&this.$MVideoPlayerApiBase10.updateViewabilityLoggingDebugger(this.$MVideoPlayerApiBase16)};d.$MVideoPlayerApiBase66=function(){var a=b("MVideoViewability").calculateViewabilityPercentage(this.$MVideoPlayerApiBase1);this.$MVideoPlayerApiBase16!==a&&(this.$MVideoPlayerApiBase16=a,this.$MVideoPlayerApiBase65())};d.$MVideoPlayerApiBase31=function(){this.$MVideoPlayerApiBase3.playEndSec&&this.getVideoElement().currentTime>this.$MVideoPlayerApiBase3.playEndSec&&!this.$MVideoPlayerApiBase3.loop&&this.pause()};d.$MVideoPlayerApiBase32=function(){if(this.$MVideoPlayerApiBase3.loop&&(this.$MVideoPlayerApiBase3.playStartSec||this.$MVideoPlayerApiBase3.playEndSec)&&(this.$MVideoPlayerApiBase3.playEndSec&&this.getVideoElement().currentTime>this.$MVideoPlayerApiBase3.playEndSec||this.$MVideoPlayerApiBase3.playStartSec&&this.getVideoElement().currentTime==0)){var a=this.$MVideoPlayerApiBase3.playStartSec||0;this.getVideoElement().currentTime=a}};d.isVisible=function(){return this.$MVideoPlayerApiBase5};d.show=function(a){a===void 0&&(a=!0),this.$MVideoPlayerApiBase5=!0,b("CSS").conditionClass(this.$MVideoPlayerApiBase1,b("MVideoUtils").SHOWN_CLASS,!0),this.$MVideoPlayerApiBase67(),a&&this.$MVideoPlayerApiBase68()};d.hide=function(){this.$MVideoPlayerApiBase5=!1,b("CSS").conditionClass(this.$MVideoPlayerApiBase1,b("MVideoUtils").SHOWN_CLASS,!1)};d.$MVideoPlayerApiBase35=function(a){this.$MVideoPlayerApiBase39(j.FIRST_REQUESTED_PLAYING),this.$MVideoPlayerApiBase33(j.REQUESTED_PLAYING),this.logEvent("requested_playing",null),this.$MVideoPlayerApiBase24||(this.$MVideoPlayerApiBase24=this.$MVideoPlayerApiBase23.getOperationLogger("requested_playing").start().setInitiator(a))};d.shouldDisablePlayDelay=function(){return!1};d.shouldIgnoreInitialMuteOperation=function(){return!1};d.play=function(a){__p&&__p();var c=this;if(b("MVideoExperiments").mtouch_prevent_consequent_calls&&this.$MVideoPlayerApiBase6)return;a&&this.setLastActionReason(a);this.$MVideoPlayerApiBase22?this.$MVideoPlayerApiBase22=!1:this.$MVideoPlayerApiBase35(a);this.$MVideoPlayerApiBase59(!0);b("MVideoExperiments").set_pending_play_request&&this.__setPendingPlayRequest(!0);if(b("MVideoExperiments").isKaiOS||this.shouldDisablePlayDelay())this.$MVideoPlayerApiBase54();else{if(b("MVideoExperiments").wait_timeout_to_play){if(this.$MVideoPlayerApiBase12)return;this.$MVideoPlayerApiBase12=b("setTimeoutAcrossTransitions")(function(){c.$MVideoPlayerApiBase54()},l)}b("MVideoExperiments").listen_readystate_to_play&&(this.$MVideoPlayerApiBase13=!0,this.$MVideoPlayerApiBase53())}};d.$MVideoPlayerApiBase54=function(){this.$MVideoPlayerApiBase13=!1,this.$MVideoPlayerApiBase12&&window.clearTimeout(this.$MVideoPlayerApiBase12),this.$MVideoPlayerApiBase12=null,this.$MVideoPlayerApiBase39(j.FIRST_VIDEO_PLAY),this.$MVideoPlayerApiBase33(j.VIDEO_PLAY),this.attemptVideoElementPlay()};d.attemptVideoElementPlay=function(){var a=this,b=this.getVideoElement().play();b&&b["catch"](function(b){b&&b.name==="NotAllowedError"&&a.logEvent("cancelled_requested_playing",{reason:"not_allowed"})})};d.pause=function(a){__p&&__p();if(b("MVideoExperiments").mtouch_prevent_consequent_calls&&!this.$MVideoPlayerApiBase6)return;this.$MVideoPlayerApiBase25=this.$MVideoPlayerApiBase23.getOperationLogger("pause").start().setInitiator(a);this.$MVideoPlayerApiBase38(j.FIRST_REQUESTED_PLAYING)&&!this.$MVideoPlayerApiBase38(j.FIRST_PLAYING)&&this.$MVideoPlayerApiBase39(j.REQUESTED_PAUSE_BEFORE_STARTED_PLAYING);this.$MVideoPlayerApiBase33(j.REQUESTED_PAUSE);a&&this.setLastActionReason(a);this.$MVideoPlayerApiBase59(!1);this.getVideoElement().pause();this.$MVideoPlayerApiBase12&&(window.clearTimeout(this.$MVideoPlayerApiBase12),this.$MVideoPlayerApiBase12=null);this.toggleClassOnMVideoElement(b("MVideoUtils").SHOW_PAUSE_CLASS,!0)};d.unload=function(){__p&&__p();this.$MVideoPlayerApiBase38(j.FIRST_REQUESTED_PLAYING)&&!this.$MVideoPlayerApiBase38(j.FIRST_PLAYING)&&this.$MVideoPlayerApiBase33(j.DESTROYED_REQUESTED_PLAYING);(!b("gkx")("1231204")||this.isPlayingState())&&(this.$MVideoPlayerApiBase42(!0),this.logPauseEvent());this.$MVideoPlayerApiBase69();this.pause("unloaded");b("Stratcom").invoke("m:video:player:destroy",null,{videoElement:this.$MVideoPlayerApiBase1,player:this.getVideoElement()});var a=this.getVideoElement();this.$MVideoPlayerApiBase3.videoElement=null;this.$MVideoPlayerApiBase10&&(this.$MVideoPlayerApiBase10.cleanUp(),this.$MVideoPlayerApiBase10=null);this.$MVideoPlayerApiBase20&&(this.$MVideoPlayerApiBase20.unload(),this.$MVideoPlayerApiBase20=null);this.release();this.hide();a&&(a.setAttribute("src",""),a.load&&a.load());a=null;this.$MVideoPlayerApiBase33(j.DESTROY);this.$MVideoPlayerApiBase23.deactivate();this.$MVideoPlayerApiBase28=!1};d.destroy=function(){this.unload(),delete this.$MVideoPlayerApiBase3[b("MVideoUtils").API_INSTANCE_KEY]};d.$MVideoPlayerApiBase69=function(){b("DOM").remove(this.getVideoElement());while(this.getVideoElement().hasChildNodes())this.getVideoElement().removeChild(this.getVideoElement().lastChild);this.getVideoElement().removeAttribute("src")};d.release=function(){this.$MVideoPlayerApiBase4.release(),b("clearInterval")(this.$MVideoPlayerApiBase17)};d.getVolume=function(){return this.getVideoElement().volume};d.setVolume=function(a){this.getVideoElement().volume=a};d.mute=function(){this.getVideoElement().muted=!0};d.unmute=function(){this.getVideoElement().muted=!1};d.seek=function(a){this.getVideoElement().currentTime=a};d.getPlaybackDuration=function(){return this.getVideoElement().duration||0};d.getCurrentTimePosition=function(){return this.getVideoElement().currentTime||0};d.getPreInitLoggerProvider=function(){return this.$MVideoPlayerApiBase23};d.$MVideoPlayerApiBase67=function(){this.$MVideoPlayerApiBase3.width&&this.getVideoElement().setAttribute("width",this.$MVideoPlayerApiBase3.width),this.$MVideoPlayerApiBase3.height&&this.getVideoElement().setAttribute("height",this.$MVideoPlayerApiBase3.height)};d.getDimensions=function(){var a=this.getVideoElement();return{width:Number(this.$MVideoPlayerApiBase3.width||a.width),height:Number(this.$MVideoPlayerApiBase3.height||a.height)}};d.$MVideoPlayerApiBase68=function(){if(!b("isCdnURI")(new(h||(h=b("URI")))(this.$MVideoPlayerApiBase3.subtitlesSrc)))return;var a=new(b("MVideoSubtitles"))(this.getVideoElement());a.setOnSubtitlesReady(function(){return a.showSubtitles()});a.loadSubtitles(this.$MVideoPlayerApiBase3.subtitlesSrc)};d.toggleClassOnMVideoElement=function(a,c){b("CSS").conditionClass(this.$MVideoPlayerApiBase1,a,c)};d.hasActivePlayer=function(){return this.$MVideoPlayerApiBase5&&this.getVideoElement().parentNode===this.$MVideoPlayerApiBase1};d.getVideoData=function(){return this.$MVideoPlayerApiBase3};d.getMVideoElement=function(){return this.$MVideoPlayerApiBase1};d.$MVideoPlayerApiBase59=function(a){this.$MVideoPlayerApiBase6=a,this.$MVideoPlayerApiBase10&&this.$MVideoPlayerApiBase10.updatePlayerStateDebugger(this.$MVideoPlayerApiBase6?b("MVideoUtils").PLAYER_STATE.playing:b("MVideoUtils").PLAYER_STATE.paused)};d.isPlayingState=function(){return this.isPlayScheduled()||this.isCurrentlyPlaying()};d.isPlayScheduled=function(){return this.$MVideoPlayerApiBase6};d.isCurrentlyPlaying=function(){return this.$MVideoPlayerApiBase7};d.setPlayerState=function(a){this.$MVideoPlayerApiBase59(a===b("MVideoUtils").PLAYER_STATE.playing)};d.setLastActionReason=function(a){this.$MVideoPlayerApiBase11=a,this.$MVideoPlayerApiBase10&&this.$MVideoPlayerApiBase10.updateLastActionReasonDebugger(a)};d.getLastActionReason=function(){return this.$MVideoPlayerApiBase11};d.getPlayerFormat=function(){return this.$MVideoPlayerApiBase3.playerFormat};d.getPlayerOrigin=function(){return this.$MVideoPlayerApiBase3.playerOrigin};d.getPlayerSuborigin=function(){return this.$MVideoPlayerApiBase3.playerSuborigin};d.getSubscriptions=function(){return this.$MVideoPlayerApiBase4};d.getVideoElement=function(){this.$MVideoPlayerApiBase3.videoElement||this.$MVideoPlayerApiBase37();return this.$MVideoPlayerApiBase3.videoElement};d.getVideoID=function(){return this.$MVideoPlayerApiBase3.videoID};d.getSavedOffline=function(){return b("MVideoCache").isVideoDownloaded(this.$MVideoPlayerApiBase3.videoID)};d.getConnectivityType=function(){return b("MVideoUtils").getConnectivityType()};d.getLastPlayReason=function(){return this.getLastActionReason()};d.getVideoPlayReason=function(){return this.$MVideoPlayerApiBase2};d.getResourceUrl=function(){return b("MVideoExperiments").shouldLogResourceUrl?this.$MVideoPlayerApiBase3.src:null};d.getIsAdsPreview=function(){return!!this.$MVideoPlayerApiBase3.isAdsPreview};d.getAdditionalLogData=function(a){var c;c=(c={},c.video_quality=this.getVideoQuality(),c.streaming_format=this.getStreamingFormat(),c.player_version=this.getPlayerVersion(),c.video_init_seq_id=this.getVideoData().videoInitSeqID,c.external_log_id=this.$MVideoPlayerApiBase3.external_log_id,c.external_log_type=this.$MVideoPlayerApiBase3.external_log_type,c);this.$MVideoPlayerApiBase3.iframeEmbedReferrer&&(c.iframe_embed_referrer=this.$MVideoPlayerApiBase3.iframeEmbedReferrer);var d=this.$MVideoPlayerApiBase2;d&&a!=="displayed"&&(c.video_play_reason=d);b("VideoViewabilityKeyEvents").Events.includes(a)&&b("MVideoViewability").shouldLog(this.$MVideoPlayerApiBase3)&&(this.$MVideoPlayerApiBase66(),c.current_viewability_percentage=this.$MVideoPlayerApiBase16);return c};d.getPlayerVersion=function(){return"html5"};d.getStreamingFormat=function(){return"progressive"};d.getEmbeddedVideoControlsConfig=function(){return null};d.getEmbeddedVideoControls=function(){return this.$MVideoPlayerApiBase20};d.setupControls=function(){var a=this,c=this.getEmbeddedVideoControlsConfig();return!c?b("Promise").resolve():new(b("Promise"))(function(d){var e={toggleQuality:a.toggleVideoQuality,getCurrentVideoQuality:a.getVideoQuality};a.$MVideoPlayerApiBase4.addSubscriptions(b("Bootloader").loadModules(["MEmbeddedVideoControls"],function(b){a.$MVideoPlayerApiBase20=new b(a,a.getVideoElement(),a.getMVideoElement(),e,c),d()},"MVideoPlayerApiBase"))})};d.$MVideoPlayerApiBase57=function(){if(this.$MVideoPlayerApiBase26)return;this.$MVideoPlayerApiBase26=b("setInterval")(this.$MVideoPlayerApiBase70,n)};d.$MVideoPlayerApiBase62=function(){b("clearInterval")(this.$MVideoPlayerApiBase26),this.$MVideoPlayerApiBase26=null};d.heartbeatEnabled=function(){return!1};d.isInitialized=function(){return this.$MVideoPlayerApiBase28};d.handleFullScreenBehaviour=function(a,b){if(this.$MVideoPlayerApiBase2!="autoplay_initiated"||!a||!b.muted||this.$MVideoPlayerApiBase30)return;this.logEvent("muted");this.$MVideoPlayerApiBase30=!0};return c}(b("mixin")(b("HVideoPlayerLoggerMixin")));e.exports={MVideoPlayerApiBase:a}}),null);
__d("VideoPlayerShakaPerformanceTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(){this.$1={}}var c=a.prototype;c.log=function(){b("GeneratedLoggerUtils").log("vpsp_proxy:VideoPlayerShakaPerformanceLoggerConfig",this.$1,b("Banzai").BASIC)};c.logVital=function(){b("GeneratedLoggerUtils").log("vpsp_proxy:VideoPlayerShakaPerformanceLoggerConfig",this.$1,b("Banzai").VITAL)};c.logImmediately=function(){b("GeneratedLoggerUtils").log("vpsp_proxy:VideoPlayerShakaPerformanceLoggerConfig",this.$1,{signal:!0})};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setAccessToken=function(a){this.$1.access_token=a;return this};c.setAdditionalBufferedRanges=function(a){this.$1.additional_buffered_ranges=a;return this};c.setAppendedBufferMs=function(a){this.$1.appended_buffer_ms=a;return this};c.setBandwidthEstimate=function(a){this.$1.bandwidth_estimate=a;return this};c.setClientTimeBegin=function(a){this.$1.client_time_begin=a;return this};c.setClientTimeEnd=function(a){this.$1.client_time_end=a;return this};c.setCode=function(a){this.$1.code=a;return this};c.setConcluder=function(a){this.$1.concluder=a;return this};c.setConnectionQualityLevel=function(a){this.$1.connection_quality_level=a;return this};c.setContentLengthHeader=function(a){this.$1.content_length_header=a;return this};c.setDevicePixelRatioFloat=function(a){this.$1.device_pixel_ratio_float=a;return this};c.setDroppedFrames=function(a){this.$1.dropped_frames=a;return this};c.setDynamicBitrate=function(a){this.$1.dynamic_bitrate=a;return this};c.setEdgeHitHeader=function(a){this.$1.edge_hit_header=a;return this};c.setEnded=function(a){this.$1.ended=a;return this};c.setError=function(a){this.$1.error=a;return this};c.setEvent=function(a){this.$1.event=a;return this};c.setExpectedLength=function(a){this.$1.expected_length=a;return this};c.setInitiator=function(a){this.$1.initiator=a;return this};c.setIsDrm=function(a){this.$1.is_drm=a;return this};c.setIsLive=function(a){this.$1.is_live=a;return this};c.setIsMuted=function(a){this.$1.is_muted=a;return this};c.setIsPageVisible=function(a){this.$1.is_page_visible=a;return this};c.setIsServableViaFbms=function(a){this.$1.is_servable_via_fbms=a;return this};c.setIsTemplatedManifest=function(a){this.$1.is_templated_manifest=a;return this};c.setLastBufferedEnd=function(a){this.$1.last_buffered_end=a;return this};c.setLastBufferedStart=function(a){this.$1.last_buffered_start=a;return this};c.setLastBufferingEventEndTime=function(a){this.$1.last_buffering_event_end_time=a;return this};c.setLastPlayingEventTime=function(a){this.$1.last_playing_event_time=a;return this};c.setLength=function(a){this.$1.length=a;return this};c.setLiveheadDelta=function(a){this.$1.livehead_delta=a;return this};c.setLogicalCpuCount=function(a){this.$1.logical_cpu_count=a;return this};c.setLowestQualityRepresentationID=function(a){this.$1.lowest_quality_representation_id=a;return this};c.setManifestType=function(a){this.$1.manifest_type=a;return this};c.setOriginHitHeader=function(a){this.$1.origin_hit_header=a;return this};c.setParentID=function(a){this.$1.parent_id=a;return this};c.setPlayerOriginCallerSpecified=function(a){this.$1.player_origin_caller_specified=a;return this};c.setPlayerSuborigin=function(a){this.$1.player_suborigin=a;return this};c.setPlayerVersion=function(a){this.$1.player_version=a;return this};c.setPlayhead=function(a){this.$1.playhead=a;return this};c.setPreloadTime=function(a){this.$1.preload_time=a;return this};c.setPreviousRepresentationID=function(a){this.$1.previous_representation_id=a;return this};c.setPriorityFloat=function(a){this.$1.priority_float=a;return this};c.setPushed=function(a){this.$1.pushed=a;return this};c.setReason=function(a){this.$1.reason=a;return this};c.setRepresentationID=function(a){this.$1.representation_id=a;return this};c.setRescheduleCount=function(a){this.$1.reschedule_count=a;return this};c.setResource=function(a){this.$1.resource=a;return this};c.setResult=function(a){this.$1.result=a;return this};c.setScriptPath=function(a){this.$1.script_path=a;return this};c.setSegmentCount=function(a){this.$1.segment_count=a;return this};c.setSegmentEndTime=function(a){this.$1.segment_end_time=a;return this};c.setSegmentStartTime=function(a){this.$1.segment_start_time=a;return this};c.setSegmentTimeGap=function(a){this.$1.segment_time_gap=a;return this};c.setSequentialID=function(a){this.$1.sequential_id=a;return this};c.setSession=function(a){this.$1.session=a;return this};c.setState=function(a){this.$1.state=a;return this};c.setStreamSwitchReason=function(a){this.$1.stream_switch_reason=a;return this};c.setTime=function(a){this.$1.time=a;return this};c.setTimeBetweenBytesMax=function(a){this.$1.time_between_bytes_max=a;return this};c.setTimeSinceMainThreadAvailable=function(a){this.$1.time_since_main_thread_available=a;return this};c.setTimeToFirstByte=function(a){this.$1.time_to_first_byte=a;return this};c.setTimeToLastByte=function(a){this.$1.time_to_last_byte=a;return this};c.setTimeToRequestSent=function(a){this.$1.time_to_request_sent=a;return this};c.setTimeToRequestStart=function(a){this.$1.time_to_request_start=a;return this};c.setTotalFrames=function(a){this.$1.total_frames=a;return this};c.setType=function(a){this.$1.type=a;return this};c.setUpdatePeriod=function(a){this.$1.update_period=a;return this};c.setVC=function(a){this.$1.vc=a;return this};c.setVideoDuration=function(a){this.$1.video_duration=a;return this};c.setVideoID=function(a){this.$1.video_id=a;return this};c.setVideoPlaybackExperienceIssue=function(a){this.$1.video_playback_experience_issue=a;return this};c.setWasDelayed=function(a){this.$1.was_delayed=a;return this};c.setWeight=function(a){this.$1.weight=a;return this};return a}();c={access_token:!0,additional_buffered_ranges:!0,appended_buffer_ms:!0,bandwidth_estimate:!0,client_time_begin:!0,client_time_end:!0,code:!0,concluder:!0,connection_quality_level:!0,content_length_header:!0,device_pixel_ratio_float:!0,dropped_frames:!0,dynamic_bitrate:!0,edge_hit_header:!0,ended:!0,error:!0,event:!0,expected_length:!0,initiator:!0,is_drm:!0,is_live:!0,is_muted:!0,is_page_visible:!0,is_servable_via_fbms:!0,is_templated_manifest:!0,last_buffered_end:!0,last_buffered_start:!0,last_buffering_event_end_time:!0,last_playing_event_time:!0,length:!0,livehead_delta:!0,logical_cpu_count:!0,lowest_quality_representation_id:!0,manifest_type:!0,origin_hit_header:!0,parent_id:!0,player_origin_caller_specified:!0,player_suborigin:!0,player_version:!0,playhead:!0,preload_time:!0,previous_representation_id:!0,priority_float:!0,pushed:!0,reason:!0,representation_id:!0,reschedule_count:!0,resource:!0,result:!0,script_path:!0,segment_count:!0,segment_end_time:!0,segment_start_time:!0,segment_time_gap:!0,sequential_id:!0,session:!0,state:!0,stream_switch_reason:!0,time:!0,time_between_bytes_max:!0,time_since_main_thread_available:!0,time_to_first_byte:!0,time_to_last_byte:!0,time_to_request_sent:!0,time_to_request_start:!0,total_frames:!0,type:!0,update_period:!0,vc:!0,video_duration:!0,video_id:!0,video_playback_experience_issue:!0,was_delayed:!0,weight:!0};e.exports=a}),null);
__d("MVideoPlayerOzEventOperationLogger",["VideoPlayerShakaPerformanceTypedLogger"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a){typeof a==="number"&&(a=Math.floor(a));return a}a=function(a){__p&&__p();babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var c=b.prototype;c.setState=function(b){this.$MVideoPlayerOzEventOperationLogger1=b;return a.prototype.setState.call(this,b)};c.getState=function(){return this.$MVideoPlayerOzEventOperationLogger1};c.setSequentialID=function(b){this.$MVideoPlayerOzEventOperationLogger2=b;a.prototype.setSequentialID.call(this,b);return this};c.setParentLogger=function(a){this.setParentID(a.$MVideoPlayerOzEventOperationLogger2);return this};c.setSegmentEndTime=function(b){a.prototype.setSegmentEndTime.call(this,g(b));return this};c.setSegmentTimeGap=function(b){a.prototype.setSegmentTimeGap.call(this,g(b));return this};c.setSegmentStartTime=function(b){a.prototype.setSegmentStartTime.call(this,g(b));return this};return b}(b("VideoPlayerShakaPerformanceTypedLogger"));e.exports=a}),null);
__d("MVideoPlayerOzPerfLoggerProvider",["MVideoPlayerOzEventOperationLogger","ScriptPath","VideoPlayerShakaPerformanceLoggerConfig","oz-player/loggings/OzPerfLoggerProviderBase","oz-player/utils/OzError"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);c.isEnabled=function(){return b("VideoPlayerShakaPerformanceLoggerConfig").isSampled};function c(b){__p&&__p();var c;c=a.call(this)||this;c.$MVideoPlayerOzPerfLoggerProvider18=b;c.$MVideoPlayerOzPerfLoggerProvider2=b.videoID;c.$MVideoPlayerOzPerfLoggerProvider4=b.video;c.$MVideoPlayerOzPerfLoggerProvider1=b.uniqueID;c.$MVideoPlayerOzPerfLoggerProvider3=0;c.$MVideoPlayerOzPerfLoggerProvider9=b.isLive;c.$MVideoPlayerOzPerfLoggerProvider8=null;c.$MVideoPlayerOzPerfLoggerProvider10=b.accessToken;c.$MVideoPlayerOzPerfLoggerProvider11=b.playerOrigin;c.$MVideoPlayerOzPerfLoggerProvider12=b.playerSuborigin;c.$MVideoPlayerOzPerfLoggerProvider17=b.preloadTime;c.setRepresentationID(b.representationId);c.$MVideoPlayerOzPerfLoggerProvider19=b.getBandwidthEstimate;return c}var d=c.prototype;d.createLoggerProvider=function(){return new self(this.$MVideoPlayerOzPerfLoggerProvider18)};d.$MVideoPlayerOzPerfLoggerProvider20=function(a){__p&&__p();var b=this.$MVideoPlayerOzPerfLoggerProvider4.buffered;if(b.length>0){var c=b.length-1;a=a.setLastBufferedStart(Math.round(b.start(c)*1e3)).setLastBufferedEnd(Math.round(b.end(c)*1e3))}c=[];for(var d=0;d<b.length-1;d++){var e=Math.round(this.$MVideoPlayerOzPerfLoggerProvider4.buffered.start(d)*1e3),f=Math.round(this.$MVideoPlayerOzPerfLoggerProvider4.buffered.end(d)*1e3);c.push([e,f])}c&&c.length&&(a=a.setAdditionalBufferedRanges(JSON.stringify(c)));return a};d.setType=function(a){this.$MVideoPlayerOzPerfLoggerProvider16=a;return this};d.getLiveheadDelta=function(){return this.$MVideoPlayerOzPerfLoggerProvider8?Math.round((this.$MVideoPlayerOzPerfLoggerProvider8-this.$MVideoPlayerOzPerfLoggerProvider4.currentTime)*1e3):null};d.getVideoID=function(){return this.$MVideoPlayerOzPerfLoggerProvider2};d.getEventLogger=function(a){__p&&__p();var c=this,d=Date.now(),e=new(b("MVideoPlayerOzEventOperationLogger"))(),f=this.$MVideoPlayerOzPerfLoggerProvider4.currentTime,g=this.$MVideoPlayerOzPerfLoggerProvider4.duration;this.$MVideoPlayerOzPerfLoggerProvider20(e).setEvent(a).setVideoID(this.$MVideoPlayerOzPerfLoggerProvider2).setLogicalCpuCount(navigator&&navigator.hardwareConcurrency).setPlayerOriginCallerSpecified(this.$MVideoPlayerOzPerfLoggerProvider11).setScriptPath(b("ScriptPath").getScriptPath()).setPlayerSuborigin(this.$MVideoPlayerOzPerfLoggerProvider12).setDynamicBitrate(this.$MVideoPlayerOzPerfLoggerProvider15).setRepresentationID(this.getRepresentationID()).setLowestQualityRepresentationID(this.$MVideoPlayerOzPerfLoggerProvider14).setPlayhead(Math.round(f*1e3)).setVideoDuration(Math.round(g*1e3)).setIsLive(this.$MVideoPlayerOzPerfLoggerProvider9).setSession(this.$MVideoPlayerOzPerfLoggerProvider1).setManifestType(this.$MVideoPlayerOzPerfLoggerProvider13).setSequentialID(this.$MVideoPlayerOzPerfLoggerProvider3++).setState(this.$MVideoPlayerOzPerfLoggerProvider5).setLastBufferingEventEndTime(this.$MVideoPlayerOzPerfLoggerProvider7).setLastPlayingEventTime(this.$MVideoPlayerOzPerfLoggerProvider6).setLiveheadDelta(this.getLiveheadDelta()).setPushed(0).setResult("success").setAccessToken(this.$MVideoPlayerOzPerfLoggerProvider10).setClientTimeBegin(d).setClientTimeEnd(d).setPreloadTime(this.$MVideoPlayerOzPerfLoggerProvider17).setBandwidthEstimate(Math.round(this.$MVideoPlayerOzPerfLoggerProvider19()));var h=this,i=e.setState;e.setState=function(a){a!==this.$MVideoPlayerOzPerfLoggerProvider5&&a==="playing"?h.$MVideoPlayerOzPerfLoggerProvider6=Date.now():a!=="playing"&&(h.$MVideoPlayerOzPerfLoggerProvider6=null);h.$MVideoPlayerOzPerfLoggerProvider5=a;return i.call(this,a)};e.updateState=function(a){return this.getState()==h.$MVideoPlayerOzPerfLoggerProvider5?this.setState(a):this};var j=e.setError;e.setError=function(a){typeof a==="object"?(a.type==="aborted"||a.type==="delay"?this.setResult("aborted"):a.type==="paused"?this.setResult("paused"):(this.setResult("failed"),j.call(this,a.type)),a instanceof b("oz-player/utils/OzError")?this.setCode(a.getExtra().code):this.setCode(a.status),this.setError(a.name)):j.call(this,a);return this};var k=e.setManifestType;e.setManifestType=function(a){c.$MVideoPlayerOzPerfLoggerProvider13=a;return k.call(e,a)};return e};d.getOperationLogger=function(a){a=this.createOperationLogger(a);this.setOperationContext(a);return a};d.createOperationLogger=function(a){__p&&__p();var b=this,c=this.getEventLogger(a),d=c.log,e=this;c.log=function(){var b=this.getData().client_time_end||Date.now();this.setClientTimeEnd(b);a==="buffering"&&(e.$MVideoPlayerOzPerfLoggerProvider7=Date.now());return d.call(this)};c.start=function(){return c};c.setLiveheadPosition=function(a){b.$MVideoPlayerOzPerfLoggerProvider8=a;c.setLiveheadDelta(b.getLiveheadDelta());return c};var f=c.setDynamicBitrate;c.setDynamicBitrate=function(a){a=Number(a)||null;b.$MVideoPlayerOzPerfLoggerProvider15=a;return f.call(c,a)};var g=c.setLowestQualityRepresentationID;c.setLowestQualityRepresentationID=function(a){b.$MVideoPlayerOzPerfLoggerProvider14=a;return g.call(c,a)};return c};d.setDynamicBitrate=function(a){this.$MVideoPlayerOzPerfLoggerProvider15=a};return c}(b("oz-player/loggings/OzPerfLoggerProviderBase"));e.exports=a}),null);
__d("MOzLiveVideoPlayerApi",["BanzaiODS","MVideoPlayerApiBase","MVideoPlayerOzPerfLoggerProvider","guid","promiseDone","requireWeak"],(function(a,b,c,d,e,f){__p&&__p();a=b("MVideoPlayerApiBase").MVideoPlayerApiBase;var g=null;c=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(b){b=a.call(this,b)||this;b.$MOzLiveVideoPlayerApi1=!1;b.$MOzLiveVideoPlayerApi2=!1;return b}var d=c.prototype;d.getAdditionalLogData=function(b){b=a.prototype.getAdditionalLogData.call(this,b);var c={},d=this.getVideoData().playbackIsLiveStreaming;d&&(c.playback_is_live_streaming=this.getVideoData().playbackIsLiveStreaming);return Object.assign({},b,c)};d.heartbeatEnabled=function(){return!0};d.postInit=function(){var a=this;b("requireWeak")("MOzLivePlayer",function(c){var d=[],e=a.$MOzLiveVideoPlayerApi3();e&&d.push(e);c.createPlayer(a.getVideoElement(),a.getVideoData().src,{perfLoggerProviders:d,observedOperationLoggers:[a.getPreInitLoggerProvider()]}).getPromise().then(function(b){g=b,a.$MOzLiveVideoPlayerApi2=!0,a.$MOzLiveVideoPlayerApi1&&(a.getVideoElement().play(),a.$MOzLiveVideoPlayerApi1=!1)})["catch"](function(a){b("BanzaiODS").bumpEntityKey(2966,"MOzLivePlayer","createPlayer.error")});a.getVideoElement().controls=!1;b("promiseDone")(a.setupControls())})};d.attemptVideoElementPlay=function(){this.$MOzLiveVideoPlayerApi2?a.prototype.attemptVideoElementPlay.call(this):this.$MOzLiveVideoPlayerApi1=!0};d.unload=function(){g&&g.destroy(),g=null,a.prototype.unload.call(this)};d.getEmbeddedVideoControlsConfig=function(){return{playbackControlHidden:!1,scrubberHidden:!0,playbackTimerHidden:!0,fullScreenControlHidden:!1}};d.getPlayerVersion=function(){return"mtouch_shaka_live"};d.getStreamingFormat=function(){return"dash"};d.$MOzLiveVideoPlayerApi3=function(){return!b("MVideoPlayerOzPerfLoggerProvider").isEnabled()?null:new(b("MVideoPlayerOzPerfLoggerProvider"))({videoID:this.getVideoID(),isLive:!0,video:this.getVideoElement(),uniqueID:b("guid")(),playerOrigin:this.getPlayerOrigin(),playerSuborigin:this.getPlayerSuborigin(),accessToken:null,representationId:null,preloadTime:null,getBandwidthEstimate:function(){return 0}})};return c}(a);e.exports=c}),null);
__d("oz-player/configs/DummyOzConfig",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(a){a===void 0&&(a={}),this.$1=a}var b=a.prototype;b.getBool=function(a,b){return typeof this.$1[a]===typeof b?this.$1[a]:b};b.getNumber=function(a,b){return typeof this.$1[a]===typeof b?this.$1[a]:b};b.getString=function(a,b){return typeof this.$1[a]===typeof b?this.$1[a]:b};return a}();e.exports=a}),null);
__d("oz-player/utils/convertRequestPromiseToReadableStream",["oz-player/shims/OzReadableStream"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){var c=new(b("oz-player/shims/OzReadableStream"))({start:function(b){a.then(function(a){a=new Uint8Array(a.response);b.enqueue(a);b.close()})["catch"](function(a){b.error(a)})}});return c}e.exports=a}),null);
__d("oz-player/media_source/OzQuickStarter",["oz-player/loggings/OzLoggingUtils","oz-player/loggings/OzPreInitLogger","oz-player/shims/ozvariant","oz-player/utils/convertRequestPromiseToReadableStream","oz-player/utils/OzError","oz-player/utils/OzErrorEmitter","oz-player/media_source/MediaSourceManager"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("oz-player/loggings/OzLoggingUtils").monitorPromiseAndLogOperation,h=b("oz-player/loggings/OzPreInitLogger").OzPreInitLoggerProvider;a=function(){__p&&__p();function a(a,c,d){__p&&__p();var e=this;d===void 0&&(d=[]);this.$4=new Map();this.$5=[];this.$7=new Map();this.$8=new(b("oz-player/utils/OzErrorEmitter"))(!0);this.$11=function(a){a instanceof b("oz-player/utils/OzError")||(a=new(b("oz-player/utils/OzError"))({type:"OZ_QUICKSTARTER",description:a.message,extra:{originalError:a}})),e.$8.emitError(a)};this.$2=a;this.$6=new h();this.$6.setInitiator("quick_starter");this.$5.push(this.$6);this.$1=new(b("oz-player/media_source/MediaSourceManager"))(this.$2,c,this.$6);this.$3=new Map();d.forEach(function(a){return e.addPrefetchTrack(a)})}var c=a.prototype;c.addPrefetchTrack=function(a){__p&&__p();var c=this,d=a.mimeCodec,e=this.$9(d);if(!e)return;var f=this.$9(d),h=this.$10(this.$6).setType(f),i=this.$10(this.$6).setType(f+";init");this.$4.set(e,a.segmentPromise?1:0);f=this.$1.createSourceBufferManager(d).then(function(d){__p&&__p();var e=b("oz-player/utils/convertRequestPromiseToReadableStream")(a.initializationPromise);g(a.initializationPromise,i,"fetch_stream");d.queueData(e,i)["catch"](c.$11);e=a.segmentPromise;if(e){var f=b("oz-player/utils/convertRequestPromiseToReadableStream")(e);g(e,h,"fetch_stream");d.queueData(f,h)["catch"](c.$11)}return d});this.$3.set(e,f);a.representationID&&this.$7.set(e,a.representationID)};c.onError=function(a){return this.$8.onError(a)};c.getSourceBufferManagerPromise=function(a){a=this.$9(a);return this.$3.get(a)};c.getPrependedSegmentsCount=function(a){var b=this.$9(a);if(!b)return 0;b=this.$4.get(b)||0;return this.getSourceBufferManagerPromise(a)?b:0};c.getRepresentationId=function(a){a=this.$9(a);return!a?null:this.$7.get(a)||null};c.getVideoNode=function(){return this.$2};c.getMediaSourceManager=function(){return this.$1};c.getObservedOperationLoggers=function(){return this.$5};c.$10=function(a){a=a.cloneContext();a instanceof h||b("oz-player/shims/ozvariant")(0,5677);this.$5.push(a);return a};c.$9=function(a){return(a.split("/")[0]||"").trim()};return a}();e.exports=a}),null);
__d("MMediaFactory",["MOzExperiments","MVideoUtils","oz-player/configs/DummyOzConfig","oz-player/media_source/OzQuickStarter","setImmediate"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=[];function h(){return window.MediaSource&&window.fetch&&window.ReadableStream}function i(){var a=b("MVideoUtils").createVideoNode(),c;h()&&b("MOzExperiments").use_quick_starter&&(c=new(b("oz-player/media_source/OzQuickStarter"))(a,new(b("oz-player/configs/DummyOzConfig"))(),[]));return{node:a,quickStarter:c}}var j;function a(){b("MOzExperiments").precreate_cache_size>0&&!j&&(j=b("setImmediate")(k));if(g.length>0)return g.shift();else return i()}function k(){j=null;var a=g.length;if(b("MOzExperiments").precreate_cache_size&&a>=b("MOzExperiments").precreate_cache_size)return;a=b("MOzExperiments").precreate_cache_size-a;for(var c=0;c<a;c++)g.push(i())}e.exports={get:a,populate:k}}),null);
__d("MOzDashPrefetchCache",["MVideoDashPrefetchCache"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){function a(){}var c=a.prototype;c.hasCacheValue=function(a){return b("MVideoDashPrefetchCache").hasCacheValue(a)};c.getCacheValue=function(a){return b("MVideoDashPrefetchCache").getCacheValue(a)};c.getCachedRepresentations=function(a){return null};return a}();e.exports=a}),null);
__d("OzMinimumSmallestDimensionRestriction",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(a){this.$1=a}var b=a.prototype;b.applyRestriction=function(a,b){var c=this;if(a.length===0)return[];b=a.filter(function(a){var b=a.getWidth();a=a.getHeight();b=b<a?b:a;return b>=c.$1});return b.length>0?b:[a[a.length-1]]};return a}();e.exports=a}),null);
__d("oz-player/strategies/OzBufferingDetectorStates",["oz-player/utils/OzBufferingUtils"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("oz-player/utils/OzBufferingUtils").BUFFER_OVERFLOW_THRESHOLD,h=b("oz-player/utils/OzBufferingUtils").BUFFER_UNDERFLOW_THRESHOLD,i=b("oz-player/utils/OzBufferingUtils").hasEnoughBuffer,j=function(){function a(a,b){this.$1=a,this.$2=b}var b=a.prototype;b.handleEvent=function(a,b,c){if(a.type==="pause"||b.paused)return new k(this.$1);a=this.$2 instanceof l?this.$1.getNumber("in_play_buffer_overflow_target",g):this.$1.getNumber("start_buffer_underflow_target",g);return i(b,a,c,this.$1)?new l(this.$1):this};return a}(),k=function(){__p&&__p();function a(a){this.$1=a}var b=a.prototype;b.handleEvent=function(a,b,c){if(a.type==="play"||a.type==="playing"||!b.paused){a=this.$1.getNumber("start_buffer_underflow_target",h);return i(b,a,c,this.$1)?new l(this.$1):new j(this.$1,this)}return this};return a}(),l=function(){function a(a){this.$1=a}var b=a.prototype;b.handleEvent=function(a,b,c){if(a.type==="pause"||b.paused)return new k(this.$1);var d=this.$1.getNumber("in_play_buffer_underflow_target",h);return this.$1.getBool("buffer_when_waiting",!1)&&a.type==="waiting"||!i(b,d,c,this.$1)?new j(this.$1,this):this};return a}();e.exports={OzVideoBufferingState:j,OzVideoPausedState:k,OzVideoPlayingState:l}}),null);
__d("oz-player/shims/ozKillEvent",["Event"],(function(a,b,c,d,e,f){"use strict";e.exports=b("Event").kill}),null);
__d("oz-player/utils/OzDomEventCapturer",["oz-player/shims/OzEventListener","oz-player/shims/ozKillEvent"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(a){this.$2=new Map(),this.$1=a}var c=a.prototype;c.capture=function(a,c){var d=this,e=this.$1.parentNode;return!e?{remove:function(){}}:b("oz-player/shims/OzEventListener").capture(e,a,function(a){if(a.target!==d.$1)return;var b=c(a);b&&d.$3(a)})};c.dispatchIfSuppressed=function(a){var b=this.$2.get(a);b&&this.$1.dispatchEvent(b);this.$2["delete"](a)};c.$3=function(a){b("oz-player/shims/ozKillEvent")(a),this.$2.set(a.type,a)};return a}();e.exports=a}),null);
__d("oz-player/strategies/OzBufferingDetector",["oz-player/shims/OzEventEmitter","oz-player/shims/OzEventListener","oz-player/shims/OzSubscriptionsHandler","oz-player/shims/ozThrottle","oz-player/utils/OzBufferingUtils","oz-player/utils/OzDomEventCapturer","oz-player/strategies/OzBufferingDetectorStates"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("oz-player/utils/OzBufferingUtils").BUFFER_UNDERFLOW_THRESHOLD,h=b("oz-player/utils/OzBufferingUtils").hasEnoughBuffer,i=b("oz-player/strategies/OzBufferingDetectorStates").OzVideoBufferingState,j=b("oz-player/strategies/OzBufferingDetectorStates").OzVideoPausedState,k=b("oz-player/strategies/OzBufferingDetectorStates").OzVideoPlayingState,l=150;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(c,d,e){__p&&__p();var f;f=a.call(this)||this;f.$OzBufferingDetector3=new(b("oz-player/shims/OzSubscriptionsHandler"))();f.$OzBufferingDetector7=function(a){__p&&__p();a=f.$OzBufferingDetector1.handleEvent(a,f.$OzBufferingDetector2,f.$OzBufferingDetector6());var b=f.$OzBufferingDetector1;f.$OzBufferingDetector1=a;var c=a instanceof i,d=b instanceof i;if(a===b)return a;if(c){c=b instanceof k?"in_play":"start/unpause";f.emit("enter_buffering",c)}else d&&f.emit("leave_buffering");a instanceof k&&f.$OzBufferingDetector4.dispatchIfSuppressed("playing");return a};f.$OzBufferingDetector8=function(a){a=f.$OzBufferingDetector7(a)instanceof i;return f.$OzBufferingDetector5.getBool("suppress_playing_event_while_buffering",!1)?a:!1};f.$OzBufferingDetector2=c;f.$OzBufferingDetector5=d;f.$OzBufferingDetector6=e;f.$OzBufferingDetector2.paused?f.$OzBufferingDetector1=new j(f.$OzBufferingDetector5):f.$OzBufferingDetector1=h(f.$OzBufferingDetector2,f.$OzBufferingDetector5.getNumber("in_play_buffer_underflow_target",g),f.$OzBufferingDetector6(),f.$OzBufferingDetector5)?new k(f.$OzBufferingDetector5):new i(f.$OzBufferingDetector5,null);f.$OzBufferingDetector4=new(b("oz-player/utils/OzDomEventCapturer"))(f.$OzBufferingDetector2);f.$OzBufferingDetector3.addSubscriptions(b("oz-player/shims/OzEventListener").listen(f.$OzBufferingDetector2,"pause",f.$OzBufferingDetector7),b("oz-player/shims/OzEventListener").listen(f.$OzBufferingDetector2,"play",f.$OzBufferingDetector7),f.$OzBufferingDetector4.capture("playing",f.$OzBufferingDetector8),b("oz-player/shims/OzEventListener").listen(f.$OzBufferingDetector2,"progress",b("oz-player/shims/ozThrottle")(f.$OzBufferingDetector7,l)),b("oz-player/shims/OzEventListener").listen(f.$OzBufferingDetector2,"timeupdate",b("oz-player/shims/ozThrottle")(f.$OzBufferingDetector7,l)),b("oz-player/shims/OzEventListener").listen(f.$OzBufferingDetector2,"seeked",f.$OzBufferingDetector7),b("oz-player/shims/OzEventListener").listen(f.$OzBufferingDetector2,"seeking",f.$OzBufferingDetector7),b("oz-player/shims/OzEventListener").listen(f.$OzBufferingDetector2,"waiting",f.$OzBufferingDetector7));return f}var d=c.prototype;d.destroy=function(){this.$OzBufferingDetector3.release()};return c}(b("oz-player/shims/OzEventEmitter"));e.exports=a}),null);
__d("shouldUseOzPlayer",["BanzaiODS","FBLogger","MOzExperiments"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,c){__p&&__p();c===void 0&&(c=!1);if(!b("MOzExperiments").mtouch_use_oz_player)return!1;b("BanzaiODS").bumpEntityKey(2966,"MOzVideoPlayerApi","setup");var d,e=function(a){var c=/mimeType=\"([^\"]*)\"\s*codecs=\"([^\"]*)\"/g,d;while(d=c.exec(a)){d=d[1]+'; codecs="'+d[2]+'"';if(!window.MediaSource.isTypeSupported(d)){b("FBLogger")("mtouch_video").debug("Unsupported DASH type: %s",d);return!0}}return!1};!a.dashManifest?d="noDashManifest":!window.MediaSource?d="noMediaSourceSupport":!window.fetch?d="noFetch":!window.ReadableStream?d="noReadableStream":e(a.dashManifest)&&(d="codecNotSupported");if(d){c&&b("BanzaiODS").bumpEntityKey(2966,"MOzVideoPlayerApi","fallback."+d);return!1}return!0}e.exports=a}),null);
__d("MOzVideoPlayerApi",["BanzaiODS","EventListener","FBLogger","MMediaFactory","MOzDashPrefetchCache","MOzExperiments","MVideoDashPrefetchCache","MVideoExperiments","MVideoPlayerApiBase","MVideoPlayerOzPerfLoggerProvider","MVideoUtils","OzExperimentsConfig","OzMinimumSmallestDimensionRestriction","VideoPlayerLoggerErrorStates","guid","oz-player","oz-player/configs/DummyOzConfig","oz-player/configs/OzGlobalConfig","oz-player/networks/OzBandwidthEstimator","oz-player/strategies/OzBufferingDetector","oz-player/utils/OzError","shouldUseOzPlayer"],(function(a,b,c,d,e,f){__p&&__p();a=b("MVideoPlayerApiBase").MVideoPlayerApiBase;b("oz-player/configs/OzGlobalConfig").setGlobalConfig(new(b("oz-player/configs/DummyOzConfig"))(b("MOzExperiments")));b("MMediaFactory").populate();var g=720;function h(a){switch(a){case 1:return"The fetching process for the media resource was aborted by the user agent at the users request.";case 2:return"A network error of some description caused the user agent to stop fetching the media resource, after the resource was established to be usable.";case 3:return"An error of some description occurred while decoding the media resource, after the resource was established to be usable.";case 4:return"The media resource indicated by the src attribute was not suitable."}return null}function i(a){switch(a){case 1:return"MEDIA_ERR_ABORTED";case 2:return"MEDIA_ERR_NETWORK";case 3:return"MEDIA_ERR_DECODE";case 4:return"MEDIA_ERR_SRC_NOT_SUPPORTED";default:return"Error code "+a+" is unknown"}}function j(a,c,d){c=b("MVideoDashPrefetchCache").createQueryStringURL(c);c=b("MVideoDashPrefetchCache").getCacheValue(c);if(!c){a.push(d);return null}return c}function k(a,b){return a.find(function(a){return a.segment_type===b})}function l(a,b,c){__p&&__p();var d=k(b,"init");b=k(b,"data");if(d){var e=j(a,d,c+" init");if(!e)return null;var f;b&&(f=j(a,b,c+" data"));return{initializationPromise:e,segmentPromise:f,mimeCodec:d.mime_codec,representationID:d.representation_id}}return null}c=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(b){__p&&__p();var c;c=a.call(this,b)||this;c.$MOzVideoPlayerApi5=null;c.getVideoQuality=function(){return c.$MOzVideoPlayerApi1};c.toggleVideoQuality=function(){__p&&__p();if(!c.$MOzVideoPlayerApi2)return;var a=c.$MOzVideoPlayerApi2.getVideoQualities();if(!a||a.length===1)return;var b=a.indexOf(c.$MOzVideoPlayerApi1);b===-1&&(b=a.length-1);b=b>=a.length-1?0:b+1;a=a[b];c.$MOzVideoPlayerApi2.switchToVideoQuality(a);c.$MOzVideoPlayerApi1=a};return c}var d=c.prototype;d.postInit=function(){__p&&__p();var a=this,c=new(b("OzExperimentsConfig"))(b("MOzExperiments"));this.$MOzVideoPlayerApi6=c;this.$MOzVideoPlayerApi7(c);try{var d=this.getVideoData().dashManifest;if(!d)throw new Error("No manifest available in VideoData. Aborting.");this.getSubscriptions().addSubscriptions(b("EventListener").listen(this.getVideoElement(),"error",this.$MOzVideoPlayerApi8.bind(this)));try{var e=[this.getPreInitLoggerProvider()];this.getVideoData().quickStarter&&(e=e.concat(this.getVideoData().quickStarter.getObservedOperationLoggers()));var f=this.getDimensions();this.$MOzVideoPlayerApi2=new(b("oz-player"))({videoNodeOrQuickStarter:this.getVideoData().quickStarter||this.getVideoElement(),config:c,rawMpdXml:d,dimensions:{width:f.width,height:f.height},loggerConfig:{perfLoggerProviders:this.$MOzVideoPlayerApi9(),observedOperationLoggers:e},prefetchCache:new(b("MOzDashPrefetchCache"))(),entityKey:this.getVideoID(),videoPlaybackRestrictions:this.$MOzVideoPlayerApi10(),customRepresentationParsers:this.$MOzVideoPlayerApi11()})}catch(a){b("BanzaiODS").bumpEntityKey(2966,"MOzVideoPlayerApi","error.createDashPlayer");throw a}this.$MOzVideoPlayerApi2.onError(function(b){return a.$MOzVideoPlayerApi12(b,"DashPlayer.onError")});this.$MOzVideoPlayerApi2.setupPlayer();c=this.$MOzVideoPlayerApi2.getVideoQualities();c.length>1&&(this.$MOzVideoPlayerApi1=this.$MOzVideoPlayerApi2.getCurrentQuality())}catch(a){b("BanzaiODS").bumpEntityKey(2966,"MOzVideoPlayerApi","failed.exception");this.$MOzVideoPlayerApi12(a,"caught");throw a}};d.$MOzVideoPlayerApi10=function(){var a=[];this.getVideoData().defaultQuality==="HD"&&a.push(new(b("OzMinimumSmallestDimensionRestriction"))(g));return a};d.$MOzVideoPlayerApi11=function(){return{qualityLabel:function(a){try{return a.$.FBQualityLabel}catch(a){return null}}}};d.$MOzVideoPlayerApi7=function(a){if(!b("MOzExperiments").use_buffering_detector)return;var c=this.getVideoElement();a=new(b("oz-player/strategies/OzBufferingDetector"))(c,a,function(){return c.duration});this.$MOzVideoPlayerApi3=a;a.addListener("enter_buffering",this.$MOzVideoPlayerApi13.bind(this));a.addListener("leave_buffering",this.$MOzVideoPlayerApi14.bind(this))};d.$MOzVideoPlayerApi13=function(){this.getLogger().startBuffering(this.getVideoElement().currentTime),this.$MOzVideoPlayerApi4=this.getPreInitLoggerProvider().getOperationLogger("buffering").setType(this.isPlayScheduled()&&!this.isCurrentlyPlaying()?"start/unpause":"in_play").setInitiator(this.getLastActionReason()).start(),this.eventEmitter.emit("buffering")};d.$MOzVideoPlayerApi14=function(){this.getLogger().endBuffering(),this.$MOzVideoPlayerApi4&&(this.$MOzVideoPlayerApi4.log(),this.$MOzVideoPlayerApi4=null),this.eventEmitter.emit("buffered")};d.onTimeUpdateBase=function(c){a.prototype.onTimeUpdateBase.call(this,c),b("MVideoExperiments").send_representation_ended&&this.$MOzVideoPlayerApi15(c.target.currentTime)};d.$MOzVideoPlayerApi15=function(a){a=this.$MOzVideoPlayerApi2.getVideoRepresentationIDAtTime(a);if(a!=null&&a!==this.$MOzVideoPlayerApi5){var b=this.$MOzVideoPlayerApi5;this.$MOzVideoPlayerApi5=a;b!=null&&this.logEvent("representation_ended",{representation_id:b,next_representation_id:a})}};d.$MOzVideoPlayerApi12=function(a,c,d){__p&&__p();d===void 0&&(d=b("VideoPlayerLoggerErrorStates").PLAYER_FAILURE);var e="(empty)",f="(empty)",g=null,j=null,k=null;if(a){k=a.stack;if(a instanceof b("oz-player/utils/OzError")){var l=a.getExtra();f=a.getType();e=a.getDescription();g=l.code;j=l.url}else a.message?e=a.message:a.code?e=h(a.code):e=a.toString(),a.code?f=i(a.code):a.name?f=a.name:f=a.toString(),e=f+" "+(e?e:"(unknown)"),f="OZ_JAVASCRIPT_NATIVE"}l=(c?c+": ":"")+e;this.logEvent("error",{error:f,error_description:l,state:d,httpStatus:g,url:j,stack:k})};d.getPlayerVersion=function(){return"mtouch_oz"};d.getStreamingFormat=function(){return"dash"};d.$MOzVideoPlayerApi8=function(a){b("BanzaiODS").bumpEntityKey(2966,"MOzVideoPlayerApi","error.onMediaElementError");a=this.getVideoElement().error;a&&this.$MOzVideoPlayerApi12(a,"onError",b("VideoPlayerLoggerErrorStates").PLAYBACK_FAILURE)};d.$MOzVideoPlayerApi9=function(){var a=this,c=[];b("MVideoPlayerOzPerfLoggerProvider")&&b("MVideoPlayerOzPerfLoggerProvider").isEnabled&&typeof b("MVideoPlayerOzPerfLoggerProvider").isEnabled==="function"&&b("MVideoPlayerOzPerfLoggerProvider").isEnabled()&&(c.push(new(b("MVideoPlayerOzPerfLoggerProvider"))({videoID:this.getVideoID(),isLive:!1,video:this.getVideoElement(),uniqueID:b("guid")(),playerOrigin:this.getPlayerOrigin(),playerSuborigin:this.getPlayerSuborigin(),accessToken:null,representationId:null,preloadTime:this.getVideoData().preloadTime,getBandwidthEstimate:function(){return b("oz-player/networks/OzBandwidthEstimator").getAdjustedBandwidth(a.$MOzVideoPlayerApi6)}})),this.getVideoData().preloadTime=null);return c};d.shouldDisablePlayDelay=function(){return b("MOzExperiments").immediate_play};d.shouldIgnoreInitialMuteOperation=function(){return b("MOzExperiments").ignore_initial_mute_operation};d.unload=function(){b("MOzExperiments").fix_call_destroy&&this.$MOzVideoPlayerApi2.destroy();var c=this.getVideoData();c.quickStarter&&(c.quickStarter=null);this.$MOzVideoPlayerApi3&&this.$MOzVideoPlayerApi3.destroy();a.prototype.unload.call(this)};c.prepare=function(a,c,d){__p&&__p();a=b("MVideoUtils").getVideoDataFromMVideo(a);var e=b("shouldUseOzPlayer")(a);a.preloadTime=Date.now();if(b("MOzExperiments").precreate_video_node&&e){e=b("MMediaFactory").get();a.videoElement=e.node;b("BanzaiODS").bumpEntityKey(2966,"MOzVideoPlayerApi","precreate_video_node");if(e.quickStarter){a.quickStarter=e.quickStarter;if(c&&b("MOzExperiments").feed_quick_starter&&(!b("MOzExperiments").no_quickstarter_for_ctp||!d||d.isAutoplayable())){e=[];d=l(e,c.prefetch_data.video,"video");if(d){a.quickStarter.addPrefetchTrack(d);d=l(e,c.prefetch_data.audio,"audio");d&&a.quickStarter.addPrefetchTrack(d)}e.length!==0&&!b("MOzExperiments").no_prefetch_for_ctp&&b("FBLogger")("mtouch_oz").mustfix("Unable to feed OzQuickStarter because some of the prefetches are missing: %s",e.join(", "))}}}};d.getAdditionalLogData=function(c){var d=a.prototype.getAdditionalLogData.call(this,c);b("MVideoExperiments").send_representation_ended&&c!=="representation_ended"&&(d.representation_id=this.$MOzVideoPlayerApi5);this.$MOzVideoPlayerApi6&&(d.video_bandwidth=b("oz-player/networks/OzBandwidthEstimator").getBandwidth(this.$MOzVideoPlayerApi6));return d};return c}(a);e.exports=c}),null);
__d("MProgressiveVideoPlayerApi",["DOM","MVideoPlayerApiBase"],(function(a,b,c,d,e,f){__p&&__p();a=b("MVideoPlayerApiBase").MVideoPlayerApiBase;c=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(b){return a.call(this,b)||this}var d=c.prototype;d.postInit=function(){a.prototype.postInit.call(this),this.$MProgressiveVideoPlayerApi1()};d.$MProgressiveVideoPlayerApi1=function(){var a=this.getVideoData(),c=this.getVideoElement();a=a.effectiveSrc;Array.isArray(a)&&a.length===1&&(a=a[0]);Array.isArray(a)?a.forEach(function(a){c.appendChild(b("DOM").create("source",a))}):a&&c.setAttribute("src",a);c.load()};d.getAdditionalLogData=function(b){b=a.prototype.getAdditionalLogData.call(this,b);var c={},d=this.getVideoData().playbackIsLiveStreaming;d&&(c.playback_is_live_streaming=this.getVideoData().playbackIsLiveStreaming);return Object.assign({},b,c)};d.getPlayerVersion=function(){return"html5"};return c}(a);e.exports=c}),null);
__d("MSphericalVideoPlayerApi",["Bootloader","MProgressiveVideoPlayerApi","MVideoCache","MVideoUtils","promiseDone"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(c){__p&&__p();var d;d=a.call(this,c)||this;d.getVideoQuality=function(){return d.$MSphericalVideoPlayerApi1};d.toggleVideoQuality=function(){__p&&__p();if(d.getVideoElement().tagName!=="VIDEO"||b("MVideoCache").isSupported()&&b("MVideoCache").getCachedVideoByID(d.getVideoID()))return;var a=d.getVideoData().availableQualities;if(!a)return;var c;for(var e in a)if(Object.prototype.hasOwnProperty.call(a,e)&&e!==d.$MSphericalVideoPlayerApi1){c=e;break}if(!c)return;d.$MSphericalVideoPlayerApi1=c;a=a[d.$MSphericalVideoPlayerApi1];if(!a)return;d.getVideoElement().pause();var f=d.getVideoElement().currentTime;d.getVideoElement().setAttribute("src",a);d.getVideoElement().currentTime=f;d.getVideoElement().load();d.getVideoElement().play()};return d}var d=c.prototype;d.postInit=function(){var c=this;a.prototype.postInit.call(this);this.getVideoElement().load();this.$MSphericalVideoPlayerApi1=this.getVideoData().defaultQuality;b("promiseDone")(this.setupControls().then(function(){return c.play(c.getVideoPlayReason())}));this.$MSphericalVideoPlayerApi3()};d.prepareDOMNode=function(){a.prototype.prepareDOMNode.call(this),this.getVideoElement().setAttribute("crossorigin","anonymous")};d.$MSphericalVideoPlayerApi3=function(){__p&&__p();var a=this;if(this.$MSphericalVideoPlayerApi2)return;var c=this.getVideoData();c=c&&c.sphericalParams||{};var d={projectionType:c.projection,initialHeading:c.initialYaw,initialPitch:c.initialPitch,fieldOfView:c.initialFieldOfView,expansionCoef:1.01};c={disableTouchControls:c.disableSphericalTouchControls};var e={videoID:this.getVideoID(),logEvent:this.logEvent.bind(this),viewportConfig:c};b("Bootloader").loadModules(["MVideoPlayerHTML5Spherical"],function(b){a.$MSphericalVideoPlayerApi2=new b(a,a.getVideoElement(),d,e),a.play()},"MSphericalVideoPlayerApi")};d.show=function(){a.prototype.show.call(this),this.toggleClassOnMVideoElement(b("MVideoUtils").SPHERICAL_CLASS,!0)};d.play=function(b){if(!this.getEmbeddedVideoControls()||!this.$MSphericalVideoPlayerApi2)return;a.prototype.play.call(this,b)};d.getEmbeddedVideoControlsConfig=function(){return{fullScreenControlHidden:!0}};d.unload=function(){a.prototype.unload.call(this),this.$MSphericalVideoPlayerApi2&&(this.$MSphericalVideoPlayerApi2.unload(),this.$MSphericalVideoPlayerApi2=null)};d.getPlayerVersion=function(){return"mtouch_360"};return c}(b("MProgressiveVideoPlayerApi"));e.exports=a}),null);
__d("CVCv3SubscriptionHelper",["DateConsts","guid"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("DateConsts").MS_PER_SEC;a=function(){__p&&__p();function a(a,c,d){this.$1=a;this.$2=b("guid")();this.$3=((a=c)!=null?a:"null")+"::"+((c=d)!=null?c:"null");this.$4=null}var c=a.prototype;c.isValidSubscription=function(){return!!this.$1};c.makeCVCv3StateUpdate=function(a,b,c,d){var e=null;a!=null&&!Number.isNaN(a)&&b!=null&&!Number.isNaN(b)&&(e={m:d,pf:Math.floor((b-a)*g),s:c,sa:Math.floor(a*g)});d={pps:this.$4,ps:e,si:this.$2,so:this.$3,vi:this.$1};this.$4=e;return d};c.makeUnifiedVideoCVCUpdate=function(a,b,c,d,e){a=this.makeCVCv3StateUpdate(a,b,c,d);return Object.assign({},a,e)};c.clearAnyPreviousContext=function(){this.$4=null};return a}();e.exports=a}),null);
__d("XVideoCVCController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/video/cvc/",{raw:{type:"Bool",defaultValue:!1}})}),null);
__d("XVideoUnifiedCVCController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/video/unified_cvc/",{})}),null);
__d("MVideoCVCv3Helper",["CVCv3SubscriptionHelper","DateConsts","MRequest","MVideoPlayerApiBase","SubscriptionsHandler","VideoBroadcastStatus","XVideoCVCController","XVideoUnifiedCVCController","clearInterval","clearTimeout","gkx","setInterval","setTimeout"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("DateConsts").MS_PER_SEC;b("MVideoPlayerApiBase").MVideoPlayerApiBase;var h=10;a=function(){__p&&__p();function a(a,c){__p&&__p();var d=this;this.$17=function(){d.$9=null,d.$18(),d.$12(0)};this.$2=a;this.$10=c;this.$11=!1;this.$1=new(b("CVCv3SubscriptionHelper"))(a.getVideoID(),a.getPlayerOrigin(),a.getPlayerSuborigin());this.$4=null;this.$5=!1;this.$6=new(b("SubscriptionsHandler"))();this.$6.addSubscriptions(this.$2.eventEmitter.addListener("playing",function(){d.$4=null,d.$5=!1,d.startUpdates()}),this.$2.eventEmitter.addListener("paused",function(){d.stopUpdates(),d.$5=!1}),this.$2.eventEmitter.addListener("finished",function(){d.stopUpdates(),d.$5=!1}),this.$2.eventEmitter.addListener("updateStatus",function(a){d.$4==null&&(d.$4=a.position),b("gkx")("1167811")&&!d.$5&&d.$4+3<=a.position&&(d.$2.logEvent("played_for_three_seconds"),d.$5=!0)}));this.$2.isPlayingState()&&this.startUpdates()}var c=a.prototype;c.startUpdates=function(){var a=this;if(b("gkx")("1133332"))this.$12(0);else{if(this.$3)return;this.$13();this.$3=b("setInterval")(function(){a.$13()},3*g)}};c.stopUpdates=function(){this.$4=null,this.$3&&(b("clearInterval")(this.$3),this.$3=null),b("clearTimeout")(this.$7),b("clearTimeout")(this.$8),this.$7=null,this.$8=null,this.$1.clearAnyPreviousContext(),this.$9=null};c.destroy=function(){this.stopUpdates(),this.$6.release()};c.$13=function(){var a=this,c=this.$1.makeCVCv3StateUpdate(this.$4,this.$2.getCurrentTimePosition(),this.$2.isPlayingState()?"playing":"stopped",this.$2.getVideoElement().muted);c={d:JSON.stringify(c),raw:1};c=new(b("MRequest"))(b("XVideoCVCController").getURIBuilder().getURI()).setMethod("POST").setIgnoreErrors(!0).setReadOnly(!0).setData(c);c.listen("done",function(b){b!=null&&a.$3!=null&&(a.$14(b.bs)||a.stopUpdates())});c.send()};c.$12=function(a){__p&&__p();var c=this;if(this.$7!=null||this.$9!=null||this.$11)return;this.$7=b("setTimeout")(function(){__p&&__p();c.$7=null;var a=c.$15();a.listen("done",function(b){if(a!=c.$9)return;c.$9=null;c.$16(b)});c.$9=a;a.send();c.$8=b("setTimeout")(c.$17,h*g)},a)};c.$18=function(){b("clearTimeout")(this.$8),this.$8=null};c.$15=function(){var a={};this.$10&&(a.ls=!0);var c=0,d=0;this.$4!=null&&(c=this.$4,d=this.$2.getCurrentTimePosition());c=this.$1.makeUnifiedVideoCVCUpdate(c,d,this.$2.isPlayingState()?"playing":"stopped",this.$2.getVideoElement().muted,a);d={d:JSON.stringify(c)};a=new(b("MRequest"))(b("XVideoUnifiedCVCController").getURIBuilder().getURI()).setMethod("POST").setIgnoreErrors(!0).setReadOnly(!0).setData(d);return a};c.$16=function(a){__p&&__p();if(a!=null){this.$18();if(a.a!=null){var b=a.a.t;switch(b){case"p":b=a.a.pi;b==null&&(b=h);this.$12(b*g);break;case"s":this.$11=!0;break;default:break}}}};c.$14=function(a){if(a==null)return!1;switch(a){case b("VideoBroadcastStatus").LIVE:case b("VideoBroadcastStatus").LIVE_STOPPED:case b("VideoBroadcastStatus").SEAL_STARTED:return!0;default:return!1}};return a}();e.exports=a}),null);
__d("MVideoDownloadState",[],(function(a,b,c,d,e,f){a={DOWNLOADING:"downloading",DOWNLOADED:"downloaded",DELETING:"deleting",NOTDOWNLOADED:"notdownloaded"};e.exports=a}),null);
__d("MVideoDownloadStateHandler",["MVideoCache","MVideoDownloadState"],(function(a,b,c,d,e,f){__p&&__p();var g=null;a=function(){"use strict";__p&&__p();function a(){this.$1={},this.$2={}}var c=a.prototype;c.addListener=function(a,b){this.$1[a]||(this.$1[a]=[]),this.$1[a].push(b)};a.removeListeners=function(a){this.$3().$1[a]&&(this.$3().$1[a]=[])};c.setState=function(a,b){a.forEach(function(a){this.$2[a]=b;if(!this.$1[a])return;a=this.$1[a];a.forEach(function(a){try{a.call(window,b)}catch(a){}})},this)};c.getState=function(a){return this.$2[a]};a.$3=function(){g||(g=new a());return g};a.listen=function(a,b){this.$3().addListener(a,b),this.initializeState(a)};a.initializeState=function(c){b("MVideoCache").isVideoDownloaded(c)?a.downloaded([c]):b("MVideoCache").isVideoDownloading(c)?a.downloading([c],b("MVideoCache").getVideoProgressByID(c),b("MVideoCache").getVideoSize(c)):a.deleted([c])};a.getState=function(a){return this.$3().getState(a)};a.downloading=function(a,c,d){this.$3().setState(a,{state:b("MVideoDownloadState").DOWNLOADING,loaded:c,total:d})};a.downloaded=function(a){this.$3().setState(a,{state:b("MVideoDownloadState").DOWNLOADED})};a.cleanup=function(a){this.$3().setState(a,{state:b("MVideoDownloadState").DELETING})};a.deleted=function(a,c){this.$3().setState(a,{state:b("MVideoDownloadState").NOTDOWNLOADED,errorMessage:c})};return a}();e.exports=a}),null);
__d("XVideoCacheCleanUpController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/video_cache_cleanup/",{video_ids:{type:"StringVector",required:!0}})}),null);
__d("MVideoCacheCleanUp",["MRequest","MVideoCache","MVideoCacheConfig","MVideoDownloadConfig","MVideoDownloadStateHandler","XVideoCacheCleanUpController","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f){__p&&__p();var g=1e4,h=null,i={clean:function(){__p&&__p();i.deleteExpiredVideos();h=null;var a=b("MVideoCache").getCachedVideoIDs(!0);if(a.length==0){i.setLastCleanUpDate();return}a=b("XVideoCacheCleanUpController").getURIBuilder().setStringVector("video_ids",a).getURI();a=new(b("MRequest"))(a);a.setMethod("POST");a.listen("done",function(a){a=a.payload||{};if(!a.error){i.setLastCleanUpDate();a=[].concat(a.offlineDisabled,a.unaccessible,a.unsaved);a.length>0&&i.deleteVideosByID(a)}});a.send()},deleteExpiredVideos:function(){var a;a=(a=b("MVideoCache")).getCachedVideosMetadata([a.DOWNLOAD_STARTED_TIME,a.DOWNLOAD_REASON,a.OFFLINE_LIFESPAN]);var c=[],d=Date.now(),e=d-b("MVideoDownloadConfig").cache_auto_downloaded_videos_caching_interval_ms;for(var f in a){var g=a[f];(g.downloadReason==="auto_initiated"&&g.downloadStartedTime<e||g.downloadStartedTime<d-g.offlineLifespan)&&c.push(f)}c.length>0&&i.deleteVideosByID(c)},deleteVideosByID:function(a){b("MVideoCache").deleteVideosByID(a,function(a){b("MVideoDownloadStateHandler").deleted([a])},"cache_sync")},requestCleanUp:function(){if(b("MVideoCacheConfig").isSupported()&&b("MVideoCache").isSupported()){var a=i.getLastCleanUpDate(),c=Date.now()-b("MVideoDownloadConfig").cache_sync_interval_ms;a=a<c;a&&!h&&(h=b("setTimeoutAcrossTransitions")(function(){b("MVideoCache").makeLocalAsyncStorageConsistent(i.clean,function(a){b("MVideoDownloadStateHandler").deleted([a])})},g))}},getLastCleanUpDate:function(){if(b("MVideoCacheConfig").isSupported())return b("MVideoCacheConfig").getItemFromConfig(b("MVideoCacheConfig").KEYS.lastCleanUp);else return 0},setLastCleanUpDate:function(){if(b("MVideoCacheConfig").isSupported()){var a=Date.now();b("MVideoCacheConfig").setItemFromConfig(b("MVideoCacheConfig").KEYS.lastCleanUp,a)}},checkAccess:function(a){a=a.downloadStartedTime;var c=i.getLastCleanUpDate();a=Math.max(a,c);c=Date.now();i.requestCleanUp();a=a+b("MVideoDownloadConfig").allowed_offline_access_interval_ms;a=a>c;return a}};e.exports=i}),null);
__d("MVideoMediaSourceState",[],(function(a,b,c,d,e,f){__p&&__p();a=function(){"use strict";__p&&__p();function a(a){this.$2=!1,this.$1=!1,this.$3=a}var b=a.prototype;b.getMediaSource=function(){return this.$3};b.videoStreamEnded=function(){this.$2=!0,this.$4()};b.audioStreamEnded=function(){this.$1=!0,this.$4()};b.$4=function(){this.$1&&this.$2&&this.$3.endOfStream()};return a}();e.exports=a}),null);
__d("showVideoUnavailableDialog",["fbt","MCustomDialog"],(function(a,b,c,d,e,f,g){function a(){var a=g._("Video kh\u00f4ng c\u00f2n kh\u1ea3 d\u1ee5ng"),c=g._("Vui l\u00f2ng k\u1ebft n\u1ed1i Internet v\u00e0 th\u1eed l\u1ea1i."),d=g._("OK");b("MCustomDialog").show({titleString:a,descriptionString:c,dismissButtonString:d})}e.exports=a}),null);
__d("MInlineVideo",["EventListener","FBLogger","MFullScreen","MLegacyDataStore","MOzLiveVideoPlayerApi","MOzVideoPlayerApi","MProgressiveVideoPlayerApi","MSphericalVideoPlayerApi","MVideoCache","MVideoCacheCleanUp","MVideoCVCv3Helper","MVideoDownloadConfig","MVideoExperiments","MVideoMediaSourceState","MVideoUtils","Stratcom","SubscriptionsHandler","emptyFunction","getElementPosition","gkx","qex","shouldUseOzPlayer","showVideoUnavailableDialog","throttle"],(function(a,b,c,d,e,f){__p&&__p();var g,h,i=!1,j=null,k=null,l;function a(a,c){__p&&__p();c&&(g=c);if(i)return;a&&a.setup();b("Stratcom").listen("click",b("MVideoUtils").PLAY_SIGIL,w);b("Stratcom").listen("m:page:unload",null,n);c=["m:jewel:flyout:open","m:popup:show","m:side-area:show","m:feed-ufi:show","m:chrome:tab:show"];b("Stratcom").listen(c,null,o);b("MVideoExperiments").remove_hidden_video_on_blur&&b("EventListener").listen(window,"blur",E);i=!0}function m(){j&&j.isVisible()&&j.getVideoData().playInFullScreen==="true"&&!b("MFullScreen").isFullScreen()&&(n(),b("MFullScreen").removeFullScreenEventListeners(window,m))}function n(){if(!j)return;b("MVideoExperiments").reuse_api_instance?j.unload():j.destroy();k!=null&&(k.destroy(),k=null);j=null;h=null;l&&(l.release(),l=null)}function o(){if(!j||!j.hasActivePlayer())return;b("MLegacyDataStore").get(h).type!=="video"?n():j&&(j.pause("page_visibility_initiated"),j.hide())}function p(){return j?j.getLastActionReason():"user_initiated"}function c(){return h}function q(a){j&&j.pause(a)}function r(a){j&&j.play(a)}function d(){j&&j.unmute()}function e(){j&&j.mute()}function s(a){j&&j.setLastActionReason(a)}function t(a,c){__p&&__p();var d=null,e=null;c.videoCodec?(d=a.getMediaSource().addSourceBuffer('video/mp4; codecs="'+c.videoCodec+'"'),d.addEventListener("updateend",function(){a.videoStreamEnded()},!1)):a.videoStreamEnded();c.audioCodec?(e=a.getMediaSource().addSourceBuffer('audio/mp4; codecs="'+c.audioCodec+'"'),e.addEventListener("updateend",function(){a.audioStreamEnded()},!1)):a.audioStreamEnded();c.videoCodec&&b("MVideoCache").getCachedVideoStream(c,function(a){var b=new FileReader();b.addEventListener("loadend",function(){d.appendBuffer(b.result)});b.readAsArrayBuffer(a)},b("emptyFunction"));c.audioCodec&&b("MVideoCache").getCachedAudioStream(c,function(a){var b=new FileReader();b.addEventListener("loadend",function(){e.appendBuffer(b.result)});b.readAsArrayBuffer(a)},b("emptyFunction"))}function u(a,c){__p&&__p();var d=null,e=null,f=null,g=null,h=function(a,b,c){b.getNextBuffer(function(b){if(b){var d=new FileReader();d.addEventListener("loadend",function(){a.appendBuffer(d.result)});d.readAsArrayBuffer(b)}else c()})};c.videoCodec?(f=b("MVideoCache").getCachedVideoStreamObject(c),d=a.getMediaSource().addSourceBuffer('video/mp4; codecs="'+c.videoCodec+'"'),d.addEventListener("updateend",function(){h(d,f,function(){a.videoStreamEnded()})},!1)):a.videoStreamEnded();c.audioCodec?(g=b("MVideoCache").getCachedAudioStreamObject(c),e=a.getMediaSource().addSourceBuffer('audio/mp4; codecs="'+c.audioCodec+'"'),e.addEventListener("updateend",function(){h(e,g,function(){a.audioStreamEnded()})},!1)):a.audioStreamEnded();c.videoCodec&&h(d,f,function(){a.videoStreamEnded()});c.audioCodec&&h(e,g,function(){a.audioStreamEnded()})}function v(a){if(!j||!j.isVisible())return;j.isPlayingState()?q("user_initiated"):r("user_initiated")}function w(a,b,c,d){x(a,b,c,d)}function x(a,c,d,e){__p&&__p();c||(c=a.getNode(b("MVideoUtils").INSERTION_POINT_SIGIL));e=e||"user_initiated";var f=b("MVideoUtils").getVideoDataFromMVideo(c),g=b("MVideoCache").isVideoDownloading(f.videoID);if(g)return!1;if(j&&j.getMVideoElement()===c&&j.isVisible()){b("qex")._("773042")&&v(a);return!1}a&&a.prevent();f.effectiveSrc=f.src;var h=b("MVideoCache").isSupported()&&f.canUseOffline&&b("MVideoCache").getCachedVideoByID(f.videoID);if(h){g=h&&b("MVideoCacheCleanUp").checkAccess(h);b("MVideoCache").logPlaybackRequest(f.videoID,g,e);if(!g){b("showVideoUnavailableDialog")();return!1}else{var i=new(b("MVideoMediaSourceState"))(new MediaSource());i.getMediaSource().addEventListener("sourceopen",function(){b("MVideoDownloadConfig").cache_chunked_playback_enabled?u(i,h):t(i,h)},!1);f.effectiveSrc=window.URL.createObjectURL(i.getMediaSource())}}f.muted=f.playMuted!=null?f.playMuted:!!d;return z(a,c,f,e)}function y(a){a=A(a);return new a(h)}function z(a,c,d,e){(!j||j.getMVideoElement()!==c)&&(b("Stratcom").invoke("m:video:player:prepare",null,{videoElement:c}),n(),h=c,(h===null||h===void 0)&&b("FBLogger")("mtouch_video").warn("mVideoContainer is not available"),b("MVideoExperiments").create_api_on_serverside?(j=d[b("MVideoUtils").API_INSTANCE_KEY],j||(b("MVideoExperiments").reuse_api_instance&&b("FBLogger")("mtouch_video").mustfix("_videoUnit is expected but not found"),j=y(d))):j=y(d),j.init(e),g&&g.setVideoUnit(j),d.playbackIsLiveStreaming&&b("gkx")("1083815")&&(k=new(b("MVideoCVCv3Helper"))(j,d.playbackIsLiveStreaming)));j.show();c=d.playOnClick&&d.type==="video";c&&(j.play(e),k!=null&&k.startUpdates(),d.playInFullScreen&&b("MFullScreen").isSupported()&&(b("MFullScreen").listenForFullScreenEvent(window,m),d.useOzLive?(b("MFullScreen").enableFullScreen(h),screen&&screen.orientation&&screen.orientation.lock&&screen.orientation.lock("landscape")):b("MFullScreen").enableFullScreen(j.getVideoElement())));j.showLoadingSpinner();B(h,d,j.getVideoElement());a&&b("MVideoUtils").handleLoggingOnPlay(a,j,d);return c}function A(a){if(a.useOzLive)return b("MOzLiveVideoPlayerApi");else if(b("MVideoExperiments").enableSphericalVideo&&a.spherical)return b("MSphericalVideoPlayerApi");else if(b("shouldUseOzPlayer")(a,!0))return b("MOzVideoPlayerApi");return b("MProgressiveVideoPlayerApi")}function B(a,c,d){var e=500;c.videoScrollUseLowThrottleRate&&(e=200);l||(l=new(b("SubscriptionsHandler"))());l.addSubscriptions(b("Stratcom").listen("scroll",null,b("throttle")(function(){return C(a,c,d)},e)))}function C(a,c,d){if(!j)return;c=b("MFullScreen").isFullScreen()||b("MVideoUtils").isVisible(b("getElementPosition")(a));d=j.isPlayingState();!c&&d&&p()!=="autoplay_initiated"?q("video_visibility_initiated"):c&&!d&&p()==="video_visibility_initiated"&&r("video_visibility_initiated")}function D(){return j?j.isPlayScheduled()?b("MVideoUtils").PLAYER_STATE.playing:b("MVideoUtils").PLAYER_STATE.paused:b("MVideoUtils").PLAYER_STATE.paused}function E(){j&&!j.isVisible()&&n()}f.getLastActionReason=p;f.getPlayerState=D;f.getPlayerDOMVideoElement=c;f.pause=q;f.play=r;f.removePlayer=n;f.setLastActionReason=s;f.setupListeners=a;f.showPlayer=x;f.unmute=d;f.mute=e}),null);
__d("MVideoPlaybackState",[],(function(a,b,c,d,e,f){a={NORMAL_PLAYBACK:"normalplayback",SLOW_PLAYBACK:"slowplayback",NOT_STARTED_PLAYBACK:"notstartedplayback"};e.exports=a}),null);
__d("MVideoAutoplayPlayerBase",["EventEmitter"],(function(a,b,c,d,e,f){__p&&__p();a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.wasVisible=!1,b)||babelHelpers.assertThisInitialized(c)}var c=b.prototype;c.isVisible=function(){throw new Error("Should be overridden")};c.getDistanceToViewport=function(){throw new Error("Should be overridden")};c.playWithoutUnmute=function(a){throw new Error("Should be overridden")};c.prepareForPlay=function(){throw new Error("Should be overridden")};c.pause=function(a){throw new Error("Should be overridden")};c.isAutoplayable=function(){throw new Error("Should be overridden")};c.getDOMPosition=function(){throw new Error("Should be overridden")};c.isLooping=function(){throw new Error("Should be overridden")};c.isState=function(a){throw new Error("Should be overridden")};c.setLastActionReason=function(a){throw new Error("Should be overridden")};return b}(b("EventEmitter"));e.exports=a}),null);
__d("MVideoPlayerApiEvents",[],(function(a,b,c,d,e,f){a=["volumeChange","stateChange","fullscreenChange","destroyed","prepare"];e.exports=a}),null);
__d("MVideoPrefetcher",["Promise","MVideoAutoplayConfig","Run"],(function(a,b,c,d,e,f){__p&&__p();var g=null,h=500;a=function(){"use strict";__p&&__p();function a(){this.$1=new Map(),this.$2=new Map(),this.$3=[],this.$4=[],this.$5=0,this.$6=1}var c=a.prototype;c.$7=function(a,c,d){d.lastProgressValue*1e3>b("MVideoAutoplayConfig").autoplay_prefetch_duration_threshold_ms||d.video.duration&&d.lastProgressValue>.9*d.video.duration?(clearInterval(d.watchdog),this.$8(d),this.$2.set(d.url,!0),a()):(clearInterval(d.watchdog),this.$8(d),c(new Error("Insufficient data received for a video preload")))};c.$9=function(a){__p&&__p();var c=this,d=document.createElement("video");d.setAttribute("src",a);d.setAttribute("preload","auto");var e={};e.video=d;e.lastProgressTime=Date.now();e.lastProgressValue=0;e.url=a;var f=new(b("Promise"))(function(a,f){e.watchdog=setInterval(function(){var d=Date.now();d>e.lastProgressTime+b("MVideoAutoplayConfig").autoplay_prefetch_waiting_time_ms&&c.$7(a,f,e)},h),d.addEventListener("progress",function(){var a=d.buffered&&d.buffered.end&&d.buffered.length>0?d.buffered.end(0):0;a>e.lastProgressValue&&(e.lastProgressValue=a,e.lastProgressTimestamp=Date.now())})});this.$10(a,f);this.$3.push(e);d.load();return f};c.$11=function(b){var c=[];for(var d=0;d<b.length;d++){var e=a.createQueryStringURL(b[d]);this.$1.has(e)||c.push(this.$9(e))}return c};c.$12=function(a){var c=this;this.$5++;a=this.$11(a.video);b("Promise").all(a).then(function(){c.$13()})["catch"](function(){return c.$13()})};c.$10=function(a,c){var d=this,e=!!this.$1.values().next().done;e&&b("Run").onLeave(function(){for(var a=0;a<d.$3.length;a++)d.$14(d.$3[a]);d.$3=[];d.$4=[];d.$5=0;d.$1.clear()});this.$1.set(a,c)};c.$14=function(a){a=a.video;a.setAttribute("src","");a.load&&a.load()};c.$8=function(a){this.$14(a);a=this.$3.indexOf(a);a>-1&&this.$3.splice(a,1)};c.$13=function(){this.$5--;var a=this.$4.shift();a&&this.$12(a)};c.getAndDelete=function(a){var b=this.$1.get(a);this.$1["delete"](a);return b};c.getPreloadCache=function(a){return this.$2.get(a)};c.queueRequestBatch=function(a){this.$6===0||this.$5<this.$6?this.$12(a):this.$4.push(a)};a.getInstance=function(){g===null&&(g=new a());return g};a.createQueryStringURL=function(a){return a.url};a.loadVideo=function(b){var c=a.getInstance();c.queueRequestBatch({video:[{url:b}]})};a.isVideoPreloaded=function(b){return!!a.getInstance().getPreloadCache(b)};return a}();e.exports=a}),null);
__d("MVideoPlayerController",["EventEmitter","MInlineVideo","MLegacyDataStore","MOzExperiments","MOzVideoPlayerApi","MVideoDashPrefetchCache","MVideoExperiments","MVideoPlayerApiBase","MVideoPrefetcher","Stratcom","destroyOnUnload","getElementPosition","shouldUseOzPlayer"],(function(a,b,c,d,e,f){__p&&__p();b("MVideoPlayerApiBase").MVideoPlayerApiBase;var g="MVideoPlayerController_instance",h=null,i=null;a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(d,e,f,g){__p&&__p();var h;h=a.call(this)||this;h.$MVideoPlayerController2=e.video_ids;h.$MVideoPlayerController3=d.video_element;h.$MVideoPlayerController1=d.root_element;h.$MVideoPlayerController6=f;h.$MVideoPlayerController7=g;!b("MOzExperiments").no_prefetch_for_ctp&&!b("MOzExperiments").no_quickstarter_for_ctp&&(h.prefetch(),h.prepareMVideoPlayerApi());h.$MVideoPlayerController4="ready";h.$MVideoPlayerController8(h.$MVideoPlayerController3);h.$MVideoPlayerController5=null;c.$MVideoPlayerController9();return h}var d=c.prototype;d.prepareMVideoPlayerApi=function(a){b("MOzVideoPlayerApi").prepare(this.$MVideoPlayerController3,this.$MVideoPlayerController6,a)};d.prefetch=function(){if(b("MVideoExperiments").do_not_prefetch_autoplay)return;if(!this.$MVideoPlayerController6)return;this.$MVideoPlayerController6.connection_quality_level?b("MVideoDashPrefetchCache").loadVideo(this.$MVideoPlayerController6.prefetch_data,this.$MVideoPlayerController6.use_credentials,this.$MVideoPlayerController6.connection_quality_level):b("MVideoDashPrefetchCache").loadVideo(this.$MVideoPlayerController6.prefetch_data,this.$MVideoPlayerController6.use_credentials)};d.isFullscreen=function(){return!1};d.getVideoID=function(){return this.$MVideoPlayerController2[0]};d.play=function(a){this.emit("playRequested",a),this.sendPlayRequest(a)};d.prepareForPlay=function(){};d.sendPlayRequest=function(a){var c=!0;c=b("MInlineVideo").showPlayer(null,this.$MVideoPlayerController3,c,a);(!c||!b("MVideoExperiments").mtouch_no_double_play)&&b("MInlineVideo").play(a)};d.pause=function(a){this.emit("pauseRequested",a),b("MInlineVideo").pause(a)};d.isAutoplayable=function(){return!1};d.getDOMPosition=function(){return b("getElementPosition")(this.getRootNode())};d.setState=function(a){this.$MVideoPlayerController4=a,this.emit("stateChange")};d.isState=function(a){return this.$MVideoPlayerController4===a};d.getVideoNode=function(){return this.$MVideoPlayerController3};d.getRootNode=function(){return this.$MVideoPlayerController1};d.setLastActionReason=function(a){this.$MVideoPlayerController5=a,a&&b("MInlineVideo").setLastActionReason(a)};d.getLastActionReason=function(){return this.$MVideoPlayerController5};d.preload=function(){if(b("MVideoExperiments").do_not_prefetch_autoplay)return;var a=b("MLegacyDataStore").get(this.$MVideoPlayerController3),c=a&&a.src;c&&!b("shouldUseOzPlayer")(a)&&b("MVideoPrefetcher").loadVideo(c)};d.isPreloaded=function(){var a=b("MLegacyDataStore").get(this.$MVideoPlayerController3);a=a&&a.src;return a&&b("MVideoPrefetcher").isVideoPreloaded(a)};c.$MVideoPlayerController9=function(){__p&&__p();if(h)return;h=[b("Stratcom").listen("m:video:player:play",null,function(a){a=c.$MVideoPlayerController10(a);c.handleApiBeginPlayback(a);!i&&b("MVideoExperiments").refresh_browser_autoplay_settings&&(i=null)}),b("Stratcom").listen("m:video:player:pause",null,function(a){var b=c.$MVideoPlayerController10(a);a=!!(a.getData()&&a.getData().destroyed);c.handleApiPausePlayback(b,a)}),b("Stratcom").listen("m:video:player:ended",null,function(a){a=c.$MVideoPlayerController10(a);c.handleApiFinishPlayback(a)}),b("Stratcom").listen("m:video:player:volumechange",null,function(a){a=c.$MVideoPlayerController10(a);c.handleApiVolumeChange(a)}),b("Stratcom").listen("m:video:player:fullscreenchange",null,function(a){a=c.$MVideoPlayerController10(a);c.handleApiFullScreenChange(a)}),b("Stratcom").listen("m:video:player:prepare",null,function(a){a=c.$MVideoPlayerController10(a);c.handleApiPrepare(a)}),b("Stratcom").listen("m:video:player:destroy",null,function(a){a=c.$MVideoPlayerController10(a);c.handleApiDestroyed(a)})];b("destroyOnUnload")(function(){h&&(h.forEach(function(a){return a.remove()}),h=null)})};c.handleApiBeginPlayback=function(a){a=b("MLegacyDataStore").get(a)[g];a&&a.$MVideoPlayerController11()};c.handleApiPausePlayback=function(a,c){a=b("MLegacyDataStore").get(a)[g];a&&a.$MVideoPlayerController12(c)};c.handleApiFinishPlayback=function(a){a=b("MLegacyDataStore").get(a)[g];a&&a.$MVideoPlayerController13()};c.handleApiVolumeChange=function(a){a=b("MLegacyDataStore").get(a)[g];a&&a.$MVideoPlayerController14()};c.handleApiFullScreenChange=function(a){a=b("MLegacyDataStore").get(a)[g];a&&a.$MVideoPlayerController15()};c.handleApiDestroyed=function(a){a=b("MLegacyDataStore").get(a)[g];a&&a.$MVideoPlayerController16()};c.handleApiPrepare=function(a){a=b("MLegacyDataStore").get(a)[g];a&&a.$MVideoPlayerController17()};d.$MVideoPlayerController11=function(){this.setState("playing")};d.$MVideoPlayerController12=function(a){!this.isState("finished")&&!this.isState("ready")&&(!a?this.setState("paused"):this.setState("ready"))};d.$MVideoPlayerController13=function(){this.setState("finished")};d.$MVideoPlayerController14=function(){this.emit("volumeChange")};d.$MVideoPlayerController15=function(){this.emit("fullscreenChange")};d.$MVideoPlayerController16=function(){this.setState("ready"),this.emit("destroyed")};d.$MVideoPlayerController17=function(){this.emit("prepare")};d.$MVideoPlayerController8=function(a){var c={};c[g]=this;b("MLegacyDataStore").set(a,c)};c.$MVideoPlayerController10=function(a){a=a.getData();return a&&a.videoElement};c.isBrowserAutoplayEnabled=function(){if(i===null){var a=document.createElement("video");a.muted=!0;a.play();i=!a.paused;a.pause()}return i};return c}(b("EventEmitter"));e.exports=a}),null);
__d("MFeedVideoPlayerController",["MFullScreen","MOzExperiments","MVideoAutoplayConfig","MVideoAutoplayPlayerBase","MVideoCache","MVideoDownloadState","MVideoDownloadStateHandler","MVideoExperiments","MVideoPlayerApiEvents","MVideoPlayerController","MVideoUtils","destroyOnUnload","getViewportDimensions"],(function(a,b,c,d,e,f){__p&&__p();var g=.5;a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(c,d){__p&&__p();var e;e=a.call(this)||this;e.$MFeedVideoPlayerController1=d;e.$MFeedVideoPlayerController2=c;e.$MFeedVideoPlayerController3=d.controller;e.$MFeedVideoPlayerController5=!1;e.$MFeedVideoPlayerController4=[];b("destroyOnUnload")(function(){e.$MFeedVideoPlayerController4.forEach(function(a){return a.remove()}),e.$MFeedVideoPlayerController4=[]});e.$MFeedVideoPlayerController6();if(b("MOzExperiments").no_prefetch_for_ctp||b("MOzExperiments").no_quickstarter_for_ctp){c=e.isAutoplayable();!e.$MFeedVideoPlayerController1.disable_preload&&(!b("MOzExperiments").no_prefetch_for_ctp||b("MOzExperiments").no_prefetch_for_ctp&&c)&&e.$MFeedVideoPlayerController3.prefetch();e.$MFeedVideoPlayerController3.prepareMVideoPlayerApi(babelHelpers.assertThisInitialized(e))}e.$MFeedVideoPlayerController1.should_autoplay&&!e.$MFeedVideoPlayerController1.disable_preload&&e.$MFeedVideoPlayerController7();return e}var d=c.prototype;d.$MFeedVideoPlayerController7=function(){b("MVideoPlayerController").isBrowserAutoplayEnabled()&&!b("MVideoCache").isVideoDownloaded(this.getVideoID())&&this.$MFeedVideoPlayerController8()&&b("MVideoAutoplayConfig").autoplay_prefetch_enabled&&(this.$MFeedVideoPlayerController3.preload&&this.$MFeedVideoPlayerController3.preload())};d.$MFeedVideoPlayerController8=function(){__p&&__p();var a=this.$MFeedVideoPlayerController1.autoplay_setting;if(a==="off")return!1;else if(b("MVideoCache").isVideoDownloaded(this.getVideoID()))return!1;else if(a==="wifi_only"&&this.$MFeedVideoPlayerController9("WIFI"))return!0;else if(a==="on"&&this.$MFeedVideoPlayerController9())return!0;return!1};d.$MFeedVideoPlayerController9=function(a){var c=b("MVideoUtils").getNetworkBandwidth();if(!c)if(b("MVideoExperiments").desktop_no_bandwidthmax)return!0;else c=0;var d=b("MVideoUtils").getConnectivityType(),e=this.$MFeedVideoPlayerController1.autoplay_bandwidth_threshold_mbps!=null?this.$MFeedVideoPlayerController1.autoplay_bandwidth_threshold_mbps:b("MVideoAutoplayConfig").autoplay_bandwidth_threshold_mbps;d=(!a||d===a)&&c>=e;return d};d.isVisible=function(){return this.$MFeedVideoPlayerController3.isFullscreen()||b("MFullScreen").isFullScreen()?!0:b("MVideoUtils").isVisible(this.getDOMPosition())};d.getDistanceToViewport=function(){if(this.$MFeedVideoPlayerController3.isFullscreen())return 0;var a=b("getViewportDimensions")().height,c=this.getDOMPosition();if(c.height===0)return-Infinity;c=c.y+(1-g)*c.height;return c-a/2};d.playWithoutUnmute=function(a){this.$MFeedVideoPlayerController3.play(a)};d.prepareForPlay=function(){!b("MVideoCache").isVideoDownloaded(this.getVideoID())&&b("MVideoAutoplayConfig").autoplay_prefetch_enabled&&b("MVideoAutoplayConfig").autoplay_prepare_next_video_enabled&&this.$MFeedVideoPlayerController3.prepareForPlay()};d.pause=function(a){this.$MFeedVideoPlayerController3.pause(a)};d.isAutoplayable=function(){var a=!1,c=this.getVideoID();b("MVideoPlayerController").isBrowserAutoplayEnabled()&&!this.$MFeedVideoPlayerController5&&(this.$MFeedVideoPlayerController1.should_autoplay&&(b("MVideoCache").isVideoDownloaded(c)?a=!1:this.$MFeedVideoPlayerController8()&&(b("MVideoAutoplayConfig").autoplay_prefetch_required_for_playback?a=this.$MFeedVideoPlayerController3.isPreloaded():a=!0)));return a};d.getDOMPosition=function(){return this.$MFeedVideoPlayerController3.getDOMPosition()};d.isLooping=function(){return!1};d.getVideoID=function(){return this.$MFeedVideoPlayerController3.getVideoID()};d.$MFeedVideoPlayerController6=function(){var a=this,c=[["stateChange",function(b){return a.$MFeedVideoPlayerController10(b)}]],d=function(b){return a.emit.bind(a,b)};this.$MFeedVideoPlayerController4=c.map(function(b){return a.$MFeedVideoPlayerController3.addListener(b[0],b[1])}).concat(b("MVideoPlayerApiEvents").map(function(b){return a.$MFeedVideoPlayerController3.addListener(b,d(b))}));b("MVideoDownloadStateHandler").listen(this.getVideoID(),function(b){return a.$MFeedVideoPlayerController11(b)})};d.$MFeedVideoPlayerController10=function(){this.$MFeedVideoPlayerController12()};d.$MFeedVideoPlayerController12=function(){(!this.isState("playing")&&this.getLastActionReason()==="user_initiated"||this.isState("finished"))&&(this.$MFeedVideoPlayerController5=!0,this.emit("autoplayableChange"))};d.$MFeedVideoPlayerController11=function(a){a.state===b("MVideoDownloadState").DOWNLOADED&&(this.$MFeedVideoPlayerController5=!1,this.setLastActionReason(null),this.emit("autoplayableChange"))};d.isState=function(a){return this.$MFeedVideoPlayerController3.isState(a)};d.getLastActionReason=function(){return this.$MFeedVideoPlayerController3.getLastActionReason()};d.setLastActionReason=function(a){this.$MFeedVideoPlayerController3.setLastActionReason(a),this.$MFeedVideoPlayerController12()};return c}(b("MVideoAutoplayPlayerBase"));e.exports=a}),null);
__d("MVideoAutoplayControllerBase",["Stratcom","SubscriptionsHandler","Visibility","destroyOnUnload","throttle"],(function(a,b,c,d,e,f){__p&&__p();a=function(){"use strict";__p&&__p();function a(a){var c=this;this.$3=null;this.$2=null;this.$6=[];this.$1=a;this.$4=null;this.$5=new(b("SubscriptionsHandler"))();b("destroyOnUnload")(function(){c.$6=[],c.$3=null,c.$4&&(c.$4.remove(),c.$4=null),c.$5.release()})}var c=a.prototype;c.getVideoUnits=function(){return this.$6};c.addVideoUnit=function(a){this.$6.push(a)};c.getPlayingVideoUnit=function(){return this.$3};c.setPlayingVideoUnit=function(a){this.$3=a};c.playVideo=function(a,b){this.setPlayingVideoUnit(a),this.$3&&this.$3.playWithoutUnmute(b)};c.addSubscriberVideoUnit=function(){if(!this.getVideoUnits().length){var a,c;this.$5.addSubscriptions((a=b("Stratcom")).listen("resize",null,this.updateAutoplay.bind(this)),a.listen("blur",null,this.$8.bind(this)),a.listen("focus",null,this.$9.bind(this)),(c=b("Visibility")).addListener(c.HIDDEN,this.$8.bind(this)),c.addListener(c.VISIBLE,this.$9.bind(this)),a.listen("MScrollArea:scrollend",null,(c=b("throttle"))(this.updateAutoplay.bind(this),this.$1)),a.listen("MScrollArea:scroll",null,c(this.updateAutoplay.bind(this),this.$1)),a.listen("MScrollArea:create",null,c(this.updateAutoplay.bind(this),this.$1)),a.listen("MScrollArea:reflow",null,c(this.updateAutoplay.bind(this),this.$1)));this.$10()||this.$11()}};c.$8=function(){this.autoplayActive()&&!this.$2&&(this.$2=this.getPlayingVideoUnit(),this.pausePlayingVideo("page_visibility_initiated"))};c.$9=function(){this.autoplayActive()&&this.$2&&(this.playVideo(this.$2,"page_visibility_initiated"),this.$2=null)};c.$11=function(){this.$4&&(this.$4.remove(),this.$4=null),this.$7=b("throttle")(this.updateAutoplay.bind(this),this.$1),this.$4=b("Stratcom").listen("scroll",null,this.$12.bind(this))};c.$12=function(){this.$7()};c.$10=function(){return!!this.$4};c.getClosestVideoUnits=function(a,b){return this.$6.filter(function(a){return a.getDistanceToViewport()>=0&&(!b||b&&a.isAutoplayable())}).sort(function(a,b){return a.getDistanceToViewport()-b.getDistanceToViewport()}).slice(0,a)};c.getVisibleUnits=function(){var a=[];this.$6.forEach(function(b){b.isVisible()?(a.push(b),b.wasVisible||(b.wasVisible=!0)):b.wasVisible=!1});return a};c.pausePlayingVideo=function(a){var b=this.$3;b&&(b.pause(a),this.$3=null)};c.updateAutoplay=function(){throw new Error("Should be overridden")};c.autoplayActive=function(){throw new Error("Should be overridden")};return a}();e.exports=a}),null);
__d("MVideoAutoplayControllerX",["MVideoAutoplayControllerBase","SubscriptionsHandler","destroyOnUnload","getViewportDimensions","setImmediate"],(function(a,b,c,d,e,f){__p&&__p();var g=null,h=500;a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c;c=a.call(this,h)||this;c.$MVideoAutoplayControllerX1=!0;c.$MVideoAutoplayControllerX2=new(b("SubscriptionsHandler"))();c.$MVideoAutoplayControllerX3=null;b("destroyOnUnload")(function(){c.$MVideoAutoplayControllerX4(),babelHelpers.assertThisInitialized(c)===g&&(g=null)});return c}c.registerVideoUnit=function(a){g==null&&(g=new c()),g.addSubscriberVideoUnit(),g.addVideoUnit(a),g.$MVideoAutoplayControllerX5(a),a.isVisible()&&g.updateAutoplay()};c.setShouldAutoplay=function(a){g==null&&(g=new c()),g.$MVideoAutoplayControllerX1=a,g.updateAutoplay()};var d=c.prototype;d.$MVideoAutoplayControllerX4=function(){this.$MVideoAutoplayControllerX2.release()};d.$MVideoAutoplayControllerX6=function(a){a&&(a.setLastActionReason("user_initiated"),this.getPlayingVideoUnit()&&this.setPlayingVideoUnit(null)),this.$MVideoAutoplayControllerX3=a,this.updateAutoplay()};d.$MVideoAutoplayControllerX5=function(a){__p&&__p();var b=this;if(!a.addListener)return;var c=function(){b.getPlayingVideoUnit()==a&&a.isState("paused")||b.getPlayingVideoUnit()!=a&&a.isState("playing")?b.$MVideoAutoplayControllerX6(a):a==b.$MVideoAutoplayControllerX3&&a.isState("finished")&&b.$MVideoAutoplayControllerX6(null)},d=function(){(a.isState("playing")||a.isState("paused"))&&b.$MVideoAutoplayControllerX6(a)},e=function(){b.getPlayingVideoUnit()!=a&&b.$MVideoAutoplayControllerX6(a)},f=function(){b.updateAutoplay()},g=function(){b.$MVideoAutoplayControllerX3&&b.$MVideoAutoplayControllerX3==a&&b.$MVideoAutoplayControllerX6(null)};this.$MVideoAutoplayControllerX2.addSubscriptions(this.$MVideoAutoplayControllerX7(a,"stateChange",c),this.$MVideoAutoplayControllerX7(a,"prepare",e),this.$MVideoAutoplayControllerX7(a,"volumeChange",d),this.$MVideoAutoplayControllerX7(a,"fullscreenChange",d),this.$MVideoAutoplayControllerX7(a,"autoplayableChange",f),this.$MVideoAutoplayControllerX7(a,"destroyed",g))};d.$MVideoAutoplayControllerX7=function(a,c,d){a=a.addListener(c,function(){b("setImmediate")(function(){d()})});return a};d.autoplayActive=function(){this.$MVideoAutoplayControllerX3&&!this.$MVideoAutoplayControllerX3.isVisible()&&!this.$MVideoAutoplayControllerX3.isState("playing")&&(this.$MVideoAutoplayControllerX3=null);return this.$MVideoAutoplayControllerX3==null};d.updateAutoplay=function(){__p&&__p();if(!this.autoplayActive())return;if(!this.$MVideoAutoplayControllerX1){this.pausePlayingVideo("autoplay_initiated");return}var a=this.getVisibleUnits(),c=a.length,d=null;if(c==1)d=a[0],d=d.isAutoplayable()?d:null;else if(c>1){var e=b("getViewportDimensions")().height/2;a.forEach(function(a){if(!a.isAutoplayable())return;var b=a.getDOMPosition();b=b.y+b.height/2;b=Math.abs(b-e);a.playPriority=b;(!d||typeof d.playPriority==="number"&&a.playPriority<d.playPriority)&&(d=a)})}this.getPlayingVideoUnit()?d!=this.getPlayingVideoUnit()&&(this.pausePlayingVideo("autoplay_initiated"),this.playVideo(d,"autoplay_initiated")):d&&this.playVideo(d,"autoplay_initiated");c=this.getClosestVideoUnits(2,!0);a=c.length;var f=null;for(var g=0;g<a;g++)if(c[g]!==d){f=c[g];break}f&&f.prepareForPlay()};return c}(b("MVideoAutoplayControllerBase"));e.exports=a}),null);
__d("MVideoFeedRegister",["MFeedVideoPlayerController","MVideoAutoplayControllerX"],(function(a,b,c,d,e,f){a={registerVideoUnit:function(a,c){a=new(b("MFeedVideoPlayerController"))(a,c);b("MVideoAutoplayControllerX").registerVideoUnit(a)}};e.exports=a}),null);