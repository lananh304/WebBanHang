if (self.CavalryLogger) { CavalryLogger.start_js(["mGADm"]); }

__d("getInstalledRelatedApps",["regeneratorRuntime"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(){__p&&__p();return b("regeneratorRuntime").async(function(a){__p&&__p();while(1)switch(a.prev=a.next){case 0:if(!(typeof navigator.getInstalledRelatedApps!=="function")){a.next=2;break}return a.abrupt("return",null);case 2:a.next=4;return b("regeneratorRuntime").awrap(navigator.getInstalledRelatedApps());case 4:return a.abrupt("return",a.sent);case 5:case"end":return a.stop()}},null,this)}e.exports=a}),null);
__d("MWriteAddFriendOnProfileController",["DOM","MViewport","$","ge"],(function(a,b,c,d,e,f){f.scrollToProfileNavTab=function(){if(b("ge")("pymkMProfile")){var a=b("DOM").scry(b("$")("root"),"div","timeline-nav")[0];a&&b("MViewport").scrollToNode(a)}}}),null);
__d("XFeedEgoLoadController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/ego/feed/load/",{loading_id:{type:"String",required:!0},ids:{type:"IntVector",required:!0},service_id:{type:"String",required:!0},replace_data:{type:"String",defaultValue:""},location:{type:"String",defaultValue:""},group_size:{type:"Int",defaultValue:1},qid:{type:"Int",required:!0},mf_story_key:{type:"Int",required:!0}})}),null);
__d("MSwipeInfiniteScrollerLoadMore",["csx","DataAttributeUtils","DOM","MLegacyDataStore","MRequest","MRequestTypes","MURI","Parent","XFeedEgoLoadController"],(function(a,b,c,d,e,f,g){__p&&__p();var h=0,i=200;function a(a){__p&&__p();var c=b("DOM").scry(a,"*","m-infinite-swipe-loading")[0];if(!c)return;var d=b("MLegacyDataStore").get(c);if(d.processing)return;b("MLegacyDataStore").set(c,{processing:!0});if(d.use_uri){new(b("MRequest"))(new(b("MURI"))(d.uri).toString()).setType(b("MRequestTypes").DEPENDENT).send();return}d=[];a=a.children;var e,f;for(var g=0;g<a.length;g++){g===0&&(f=a[g].getAttribute("data-service"));var h=b("DataAttributeUtils").getDataFt(a[g]);if(!h)continue;g===0&&(e=JSON.parse(h));h=JSON.parse(h).ego_id;d.push(h)}h=b("XFeedEgoLoadController").getURIBuilder().setString("loading_id",c.id).setIntVector("ids",d).setString("service_id",f||"pymk").setString("location","inline_feed").setInt("qid",e.qid).setInt("mf_story_key",e.mf_story_key).getURI();g=new(b("MRequest"))(new(b("MURI"))(h).toString()).setType(b("MRequestTypes").DEPENDENT);a=function(){var a=b("Parent").bySelector(c,".scrollArea");j(a.id);b("MLegacyDataStore").set(c,{processing:!1})};g.listen("done",a.bind(this));g.send()}function j(a){__p&&__p();a=document.getElementById(a);if(!a)return;var c=b("MLegacyDataStore").get(a);if(!c||!c.scrollArea)return;var d=b("DOM").scry(a,"*","m-swipe-pymk-item")[0];d=b("DataAttributeUtils").getDataAttribute(d,"data-unit-size");d||(d=i);var e=c.scrollArea;if(e.getAutomaticPaging())e.reflow("auto");else{e=b("DOM").find(a,"*","scroll-area-body").children;a=[h];for(var f=1;f<e.length;f++)a[f]=a[f-1]+parseInt(d,10);c.scrollArea.reflow(a)}}e.exports={maybeLoadMore:a,reflow:j}}),null);
__d("XEgoHideLoggingController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/ego/feed/logging/xout/",{ego_id:{type:"Int",required:!0},qid:{type:"Int",required:!0},mf_story_key:{type:"Int",required:!0},service_id:{type:"String",required:!0}})}),null);
__d("XEgoPYMIActionsLoggingController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/pymi/logging/",{action:{type:"String",required:!0},invitee_name:{type:"String"},qid:{type:"Int"},mf_story_key:{type:"String"},ego_id:{type:"Int"},how_found:{type:"String"}})}),null);
__d("XFeedEgoImpressionLoggingController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/ego/feed/logging/impression/",{})}),null);
__d("MSwipeInfiniteScroller",["cx","CSS","DataAttributeUtils","DOM","MFriendingState","MLegacyDataStore","MParent","MRequest","MScrollAreaHelper","MSwipeInfiniteScrollerLoadMore","Stratcom","XEgoHideLoggingController","XEgoPYMIActionsLoggingController","XFeedEgoImpressionLoggingController"],(function(a,b,c,d,e,f,g){__p&&__p();var h,i=3,j={};({});function a(a){__p&&__p();var c=a.getData().event;if(!c.getNode("m-swipe-pymk-item")&&!c.getNode("m-swipe-pysf-item"))return;var d=c.getTarget(),e=b("MLegacyDataStore").get(d);e._delayTimer&&window.clearTimeout(e._delayTimer);e._delayTimer=window.setTimeout(function(){e.scrollArea===void 0&&(e.scrollArea=b("MScrollAreaHelper").findScrollArea(d,14)),e.scrollArea&&(e.scrollArea.scrollByPages(1),b("Stratcom").invoke("MSwipeInfiniteScroller:autoScrollStart",null,c))},1e3);e._touchstartListener&&e._touchstartListener.remove();e._touchstartListener=b("Stratcom").listen("touchstart",null,function(a){window.clearTimeout(e._delayTimer),delete e._delayTimer,e._touchstartListener.remove(),delete e._touchstartListener});if(c.getNode("m-swipe-pymk-item")){a=b("MParent").bySigil(d,"undoable-action");if(!a)return;a=b("DOM").scry(a,"*","pymk-remove-button")[0];a&&b("CSS").hide(a)}}function c(a){a=a.getData().event;if(!a.getNode("m-swipe-pymk-item"))return;a=a.getTarget();a=b("MParent").bySigil(a,"undoable-action");if(!a)return;a=b("DOM").scry(a,"*","pymk-remove-button")[0];a&&b("CSS").show(a)}function d(a){a=a.getData();var b=a.scrollarea;l(b,a.container)}var k=function(a){__p&&__p();a=JSON.parse(b("DataAttributeUtils").getDataFt(a));if(!a)return;var c=a.ego_id,d=a.qid;a=a.mf_story_key;var e=(d+a).toString();if(!c||j[e]&&j[e][c])return;var f=b("XFeedEgoImpressionLoggingController").getURIBuilder().getURI();new(b("MRequest"))(f).setMethod("POST").setData({ego_id:c,qid:d,mf_story_key:a}).send();j[e]||(j[e]={});j[e][c]=!0};function l(a,c){var d=a.getScrollPageIndex()+1,e=a.getScrollPageCount();d+i>=e&&b("MSwipeInfiniteScrollerLoadMore").maybeLoadMore(c);d=a.getChildrenOnCurrentPage();for(var e=0;e<d.length;e++)k(d[e])}function e(a){a=a.getNode("m-swipe-pymi-item");if(!a)return;var c=b("MScrollAreaHelper").findScrollArea(a);if(!c)return;window.setTimeout(function(){c.scrollByPages(1)},500)}function g(a){__p&&__p();var c=a.getNode("m-swipe-pymk-item"),d="PYMK";c||(c=a.getNode("m-swipe-pysf-item"),d="PYSF");c||(c=a.getNode("m-swipe-pymi-item"),d="PYMI");if(!c)return;var e=b("MScrollAreaHelper").findScrollArea(c);if(!e)return;a=JSON.parse(b("DataAttributeUtils").getDataFt(c));if(a&&a.ego_id){var f=b("XEgoHideLoggingController").getURIBuilder().setInt("ego_id",a.ego_id).setInt("qid",a.qid).setInt("mf_story_key",a.mf_story_key).setString("service_id",d).getURI();new(b("MRequest"))(f).send();if(d=="PYMI"){f=b("XEgoPYMIActionsLoggingController").getURIBuilder().setString("action","xout").setInt("ego_id",a.ego_id).setString("how_found","mtouch_feed").getURI();new(b("MRequest"))(f).send()}}b("CSS").addClass(c,"_3m57");if(!e._canUseHscroll&&!e._isHorizontal){b("DOM").remove(c);return}window.setTimeout(function(){b("DOM").remove(c),b("MSwipeInfiniteScrollerLoadMore").reflow(e._element.id),l(e,e._content)},500);d=e.getScrollPageIndex()+1;a=e.getChildAtPageIndex(d);k(a)}(h=b("Stratcom")).listen("MScrollArea:scrollend","infiniteScroller",d);h.listen("click","invite-contact-button",e);h.listen(b("MFriendingState").REQUEST_SENT,null,a);h.listen(b("MFriendingState").REQUEST_CANCELED,null,c);h.listen("click","m-swipe-xout",g);f.logImpressionForElement=k}),null);
__d("MSwipeFirstUnitImpression",["MLegacyDataStore","MSwipeInfiniteScroller","MViewport","Stratcom","Vector"],(function(a,b,c,d,e,f){__p&&__p();function a(a,c){if(c){a=b("MLegacyDataStore").get(c);if(a&&a.scrollArea)g(a.scrollArea);else var d=b("Stratcom").listen("MScrollArea:create",null,function(a){a.getData().element.getAttribute("id")===c.id&&(g(a.getData().scrollarea),d&&d.remove())})}}var g=function(a){var c=a.getElement();if(h(c))i(a);else var d=b("Stratcom").listen("scroll",null,function(){h(c)&&(i(a),d&&d.remove())})},h=function(a){var c=b("MViewport").getHeight()+b("MViewport").getScrollTop(),d=a.clientHeight;a=b("Vector").getElementPosition(a).y;a=a+d;return a&&c>=a},i=function(a){var c=a.getChildAtPageIndex(0);c=Math.min(Math.floor(a.getElement().offsetWidth/c.offsetWidth),a.getNumChildren());for(var d=0;d<c;d++)b("MSwipeInfiniteScroller").logImpressionForElement(a.getChildAtPageIndex(d))};e.exports={setup:a}}),null);
__d("MProfilePymkChain",["DOM","MLegacyDataStore","MRequest","MURI","Stratcom","$"],(function(a,b,c,d,e,f){__p&&__p();var g=!1;a=function(){__p&&__p();if(g)return;g=!0;var a="m-chain-cancel-request",c="pymkMProfile",d="/a/friendrequest/cancel/index.php",e="add-friend",f="request-sent";function h(g){__p&&__p();var h=g.getNode(a),i=b("MLegacyDataStore").get(h),j=b("$")(c);h=new(b("MURI"))(d);h=new(b("MRequest"))(h.toString());h.setData({subject_id:i.subjectid});h.listen("start",function(){j&&b("DOM").remove(j);if(i.subjectid===i.timeline_profile_id){var a,c=b("$")("m-timeline-cover-section"),d=(a=b("DOM")).find(c,"*",e);c=a.find(c,"*",f);a.show(d);a.hide(c)}});h.send();g.kill();return!1}b("Stratcom").listen("click",a,h)};f.main=a}),null);
__d("MQuickPromotion",["DOM","Stratcom"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=!1;e.exports={main:function(){if(g)return;g=!0;b("Stratcom").listen("click","m-promo-close",function(a){var c=a.getNode("m-promo");a=a.getNode("m-megaphone");b("DOM").hide(c,a)})}}}),null);
__d("XRelatedApplicationsLoggingController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/related-application/",{call_success:{type:"Bool",defaultValue:!1},checked_installed_related_apps:{type:"StringKeyset",defaultValue:[]},present_installed_related_apps:{type:"StringKeyset",defaultValue:[]}})}),null);
__d("MRelatedApplicationsLogging",["MRequest","XRelatedApplicationsLoggingController","getInstalledRelatedApps","promiseDone"],(function(a,b,c,d,e,f){__p&&__p();var g=b("XRelatedApplicationsLoggingController").getURIBuilder();function a(a){__p&&__p();b("promiseDone")(b("getInstalledRelatedApps")(),function(c){g.setStringKeyset("checked_installed_related_apps",a);if(c!=null&&c.length>0){g.setBool("call_success",!0);c=c.map(function(a){return a.id});g.setStringKeyset("present_installed_related_apps",c)}else g.setBool("call_success",!1);new(b("MRequest"))(g.getURI()).setIgnoreErrors(!0).send()})}e.exports={init:a}}),null);